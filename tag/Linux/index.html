<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Hello, world! - Michael Thomas&#x27;s Blog</title><meta name="gridsome:hash" content="db76644fd670d21082dcced77d5eb06581ea0935"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="A simple, hackable &amp; minimalistic starter for Gridsome that uses Markdown for content."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.808923a7.css" as="style"><link rel="preload" href="/assets/js/app.91f6f24e.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--tag-vue.0c7924f4.js" as="script"><link rel="prefetch" href="/assets/js/6.136c78ae.js"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.63f85100.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.abe619f8.js"><link rel="prefetch" href="/assets/js/page--src--templates--post-vue.385e2387.js"><link rel="stylesheet" href="/assets/css/0.styles.808923a7.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← Michael Thomas's Blog
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><h1 class="tag-title text-center space-bottom">
    # Linux
  </h1><div class="posts"><div class="post-card content-box"><div class="post-card__header"><!----></div><div class="post-card__content"><h2 class="post-card__title">Using ZSH with Toolbox on Fedora Silverblue 33</h2><p class="post-card__description">Setup your own customized shell within Fedora Toolbox, all while maintaining convenience features from the default shell.</p><div class="post-meta post-card__meta">
   Posted 19. November 2020.
   <strong>3 min read.</strong></div><div class="post-tags post-card__tags"></div><a href="/using-zsh-with-toolbox-on-fedora-silverblue-33/" class="post-card__link">Link</a></div></div><div class="post-card content-box"><div class="post-card__header"><!----></div><div class="post-card__content"><h2 class="post-card__title">NixOS Configuration Notes</h2><p class="post-card__description"></p><div class="post-meta post-card__meta">
   Posted 5. April 2021.
   <strong>3 min read.</strong></div><div class="post-tags post-card__tags"></div><a href="/nix-os-configuration-notes/" class="post-card__link">Link</a></div></div></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2021 Michael Thomas. </span><span class="footer__links">Powered by <a href="//gridsome.org"> Gridsome </a></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"tag":{"title":"Linux","belongsTo":{"edges":[{"node":{"title":"Using ZSH with Toolbox on Fedora Silverblue 33","path":"\u002Fusing-zsh-with-toolbox-on-fedora-silverblue-33\u002F","date_published":"19. November 2020","timeToRead":3,"description":"Setup your own customized shell within Fedora Toolbox, all while maintaining convenience features from the default shell.","content":"\u003Cp\u003EFedora Silverblue is one of the most interesting Linux distros I have tried to date, and I ended up choosing to use it as my daily-driver for its stability, ease of updates, and cleanliness. However, one of my biggest must-haves was a proper, customized shell. \u003C\u002Fp\u003E\n\u003Cp\u003EMy personal choice of shell is ZSH with the \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fzimfw\u002Fzimfw\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EZim Framework\u003C\u002Fa\u003E, giving me a fast and simple shell experience without too much hassle. However, the basic installation steps for these differ a bit on Fedora Silverblue. \u003C\u002Fp\u003E\n\u003Ch2 id=\"installation\"\u003E\u003Ca href=\"#installation\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EInstallation\u003C\u002Fh2\u003E\n\u003Cp\u003EFirst, install \u003Ccode class=\"language-text\"\u003Ezsh\u003C\u002Fcode\u003E as a layered package on the host system with rpm-ostree:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Esudo rpm-ostree install zsh\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAfter doing so, go ahead and reboot to enter the new ostree deployment, which will now contain zsh.\u003C\u002Fp\u003E\n\u003Cp\u003ENext, we'll go ahead and install zsh in toolbox. Enter the toolbox with \u003Ccode class=\"language-text\"\u003Etoolbox enter\u003C\u002Fcode\u003E and then install \u003Ccode class=\"language-text\"\u003Ezsh\u003C\u002Fcode\u003E the old fashioned way:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Esudo dnf install zsh\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENow that we've got zsh installed everywhere, type \u003Ccode class=\"language-text\"\u003Eexit\u003C\u002Fcode\u003E to get back to the host system. Since \u003Ccode class=\"language-text\"\u003Echsh\u003C\u002Fcode\u003E is not included on Silverblue, we'll use \u003Ccode class=\"language-text\"\u003Eusermod\u003C\u002Fcode\u003E instead to switch to our shiny new shell:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Esudo usermod --shell $(which zsh) $USER\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAlternatively, Fedora offers \u003Ccode class=\"language-text\"\u003Elchsh\u003C\u002Fcode\u003E which provides a similar interface to \u003Ccode class=\"language-text\"\u003Echsh\u003C\u002Fcode\u003E on other Linux systems. \u003C\u002Fp\u003E\n\u003Cp\u003EStart a new shell and you should be greeted by the ZSH first time configuration, which will look something like this:\n\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 869 451' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-1164167a3d1ce10a4a3e10932d500910'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-1164167a3d1ce10a4a3e10932d500910)' width='869' height='451' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAhCAYAAABpwa0hAAAACXBIWXMAAAsSAAALEgHS3X78AAALi0lEQVRo3q3Z2W4dRw4G4PMGczMIEseyLMur9n219t2yJcvymjhOkGDmboC8zCCP21Mfu3jUPpEdDZCLQndXV7FY5M%2bf7Oreux9%2bbHYODpvj5y%2bavaPjZmtvv5mYmWsOT06bnf3DZu\u002FwqHkyOd3sl3cnZczU3EL0rTzdbOaXVprzV5cxf2J6tnn24ixkmHd48ixkud89OGpmF5aa49PnRc5J83Rrp\u002FS1YxaWV5sHT8abew8fN6OPnvTb4PNN%2br50\u002F7XWm1tcbuaLEhTd2N5tltbW202Wjaw83WiW1542Y1PTzdPtnWZzZ68ZLxtd29wKo0zMzDbrW9vN6sZmc\u002F\u002FxWLOyvtEsrq43c0vLIc87fTY%2bPb\u002FYHJXrajHc4spavLOeseZS5r72%2bMmNFP%2brdmMD3B4ZbW7fvRdtqNx\u002FPzwS1%2b%2bGhsv9vXi%2bc%2b9%2bc%2bvO3Rjj\u002Frtyb0z2e7774FF5fzXf9VZp5tyq48l0HR59EP3kk0HZu\u002Fcfxn3K1YzLd%2b71jZR1tHbs\u002Fc\u002Fm5Bjjb2qE3lLx2FLxMo%2bGF4uHltefhrfXNrYCBTzmKjRmCpTT6wulH0JAenx6pnhzJZBizGxBljnzyytl7FZjHXOs83BsIlA2OTsfV4pAIkQIJwgzN9c01zrQBIHa%2buZ2rEVH4UT24upa6EKvNMJfGsCE7f2DEKrD4tt7B9Hn\u002FuXl63h2b4OuYpcRKLG1u9%2b8\u002F\u002FFjbMDmdgs\u002FUMrGyMiWY4UYDy6srLbGLUrznNA5enbaPD9\u002F2by4eFXun8e641MzcT04fhYcJFwZ7qTwDf4x\u002FqyMf3Z2Hk578fIiwozMGxmApSgELprYJ4x1KfX8\u002FCJIz5WHKJmeOS3jLDhWlKQcxfeDO1pOoATyO3l%2bFmMZ7vj0RSHL83jGCzaAPMklixyGNI8%2bCXmytGtDoBMy\u002F3cIDHbwiJBIiLImz%2bufnJ0L1hYij8YnA%2bqMBNI84910mcc43pPHOPoXahgJCdkD%2bXnnOddkfOPM12SHIMdizCTKv50Ek2ASAQhLSyL69vZwnyCRWpJiEqBmfkuSo7Xd6xMXL5nz3ZCxI31P3q5EGWRJTrl%2be\u002FtOzM33Q9XLSZzp\u002FZts8MYG4M3tyP2zMUmeFnO8yyunBaKL4ZXZgKnQwBeQ4Xm\u002F1g5yPSKK9LazG94V9\u002Fhgc3cv4O\u002FeGjxrLLiTJ7RwkTGJODFPDrn7xydBgnSYmpvvG%2bHvaMUAG6EghSm3Ve7FPGiK0agHyhhxKX5t2FjMflgMIH4pSgZjIro2K8yWTZyEPJtlLAZ4UOFsrPcMtnd4HASm%2bEKOMgijcgQ%2bQnYMM1P0EZY3RcGNDADKAdlKhN\u002FLz7Uu8C7zOgi2cO2GQAvhDJE7OSbC5EFfRtYAntu8\u002FqhfH2QotLXIaIwd%2biw8ruR3SS43360TXLNlyAy%2by\u002F4M%2bR4vg\u002FrjiakQyPMIEOQQ0nSQ4VxYn1e9Fx4QoY\u002FHjPfsmrWBMWSTq19m4FnkSI50aGxbMyyFZ72bnl9oCdW7kL\u002FWrxc8Gz%2bzsBgoshFz6BTEXcZZ01UfpJKNcMnV6EAnzdyoA0DbAiyihAVr8Hb\u002F4eNP7XfCYVsay\u002FOXb98FzEHb\u002Fas3b\u002FuFzpv3HwKykaNLWrOgeNZvHGMqXF6\u002Fex%2bhBupS4svLN2FsaZHMtx9%2biHvjwljFKORIx\u002FI%2bQ\u002FAoYwpL6%2bErqZS%2bF6\u002FfRLYRZubYk%2b8eTUgzikzTA8fhTi1wp8Ily06ElXk4rp13YJ4ZZDBfD8IwoZstZSSEebQL59Qp83tXfoZAthjXWfP6ELCXsT%2bFTw8UQCVzLsvI6\u002Fpd9T0s78DFGG2yWM471jeO8g\u002FH2nfdccY8Gp%2bIq2acUGnDooV8zC1j9bVzxvu6UBD8oSjl5bt8Dv3Ir8\u002F2kuvEPsoaZKexBtNkD8yVu9O1Jse62Pfs4jIghOHB8OOnn6NgUdZKXUJGRQd6YvPHT58CblKZGJS6QNk80Ad1sNUHptKbWMYNSmnwNveyrKUM9m2BAOl18fptCZOXEVLrW239r0%2bY0oM80KancfRjXM9SrfsvZYxeWjIrLaQWRFKJMOtwz0hE\u002FFDaON8F0h6iCWKrPKDhC6kNV%2bTnLxnIyQePvvh2OGjPC7wnEwHyotog6orN9pPaPBuDiERNbiIRm95Pgsx9fS1t9rqxpINV1eEmye02aXGxIxcnQmyMVxESlPhoQZQHxYvxbrc9DJHveez81esgPUpawz2D8FAcktTNLVbWtyaEOUPYr\u002FVC1BJFn9xMN5aTCwZh3h1zLQKSWHKwb\u002FQukQx3CCVrhjsD5WyO737LxzlDzd1tSTzajCRh1fqiL6\u002FO6ZJjnhl03%2becJMQgzUp02UYGnv\u002FSAMhoqX7Q5MeQ%2bJOuknBA9cnkVJDfZP3Q0ZCTGDXXkRjPmTMWNcF8v3bgdVfjMrOs1rpAP5ga0xLeUhCXZwjx3NYOM5EOlcneKYvNk8qMy7EpR3%2bS59eM0ENqiGmqxhYSyTogv\u002FQ8y6snNb8iIzwh774qcy0s18r1sgjYvnj5qtYPR\u002FHt\u002Fstvv0VcJ4MLHySFIBkLkeEavGEDwo885CYsvBNeh3FmcBG5X9wj648\u002F\u002F9L88NOn2MeVrmehr1LeHr5khF5CJkMgYdSNp3zOPgt3c253XheWw6NXfbzYLUFzfpBWZ40sybt5v5vPc82R\u002FrjHn\u002FXn3LzPzX\u002FpwLTXP5CshUjmbH2P6jVh3YdT3VA3e3Rb9svpOb99nmie1Lqh%2b43fze1ZG3Rzfc7XsoTtbkSfMO3qkLrmul8OgcLomctZDnxACdR265G4UnWnhApBIKpukPPBFDTlcTW7FGb%2bWZEnpCK3Fzm%2b8sSvuBQWoOz0CNQ9S3dncZp0ErroR3jS7q\u002F\u002F%2bneEmtrAfHPBm97GCZ08G8Qn3kUIn7QhI8QjbMo4vDZ4VhiV4GQ9fWGhSFsl1WQtgKwsoCaQmqQjca6o0S9Pi3nkY4zYRj6LWRPUQ1YfK4jMJiirn1GkUOPyoDPqjMj7q\u002FUccrk9i9xoj%2bKN4RipOg5hS8pdqgemuAIfkRtnlqUheHscr9XuVzkAXHhLzrawTfCMnK7xuIqPMjasIGJdnrYxKIncXxTiTQR1FO9PgrRUltpR\u002FdA6rB6ipLWRpY3QwQcakqSDOTxuDCKFSCGpT41Ann6kSU%2b60DUPd7MYuo4Ie4PHSFibBXmRkgS593MkFC%2bVWx6OsLBNq%2bAmK%2bR5FNQgIQ9VGIMckCabB8lSBcaZYfEc2FLeRlwZDEroZRPY3JrbYeSDGIc8kwCvI8Ekzq8dlf3JAIv1UBL8QTC\u002F1W3a5iDDPRTgDfCdqgeh4Jh\u002Fj8ASWfFuHqHzmuPzPFgl3xh9xggrxiSTMV3bemOp\u002FycpwycPVbuEOkiug8\u002FXkuBV9dW%2b\u002FL6evmTLaiwOPuspjTn5p6j9%2b3M1Lv\u002F25GHpVeV3VdUN3bs6KO2eGA11Kr6UY638ExVz6rrdKnG48wmfMuwn%2b\u002FKQdrA8DgPweB50UjZ%2bbBTPaEls4Muj4hEEeYVHIQJceYf3s5aHAn1iNz9KAr6VuXm\u002FT1IlJMQ9HXg6iU4IqTKhApvr53XvyIAsa3omA5GTk3IRHzR57xule5b4%2baFo2ZiTFxD2hYVU8ACFCHFijJSMIzjGFmMZgw8YgVH8APU%2bx4l7CmQ8grOUF%2bFVlAkCK2NAGrTFOFIkP\u002F9K5UcRIsZBynRjhAxHOTVKAmSc5A560Z1h7Md8cq4NgbaIaA8MbCb%2b8JScGf\u002FZihHk4PgTVDZNkEni87zUAuPVEJS2EE4IRG213jTXJnmfF0\u002FrX6D4%2b1SuDJTHWt\u002FcGmr%2b8\u002FvvzX\u002F\u002F%2bKP5xz%2b\u002F%2bYzMQLitCtsProR2fmR1T7HygywrxAi3r4UAgsj86GqzmebycBGrg%2bB0PTeMw9EC7\u002FYXefvzkrV9xHierIeTjtzzQNPzdP9QcymIEGyzcqQsI6n9baJbYX7p\u002FtrnAQ\u002Ff74y5DgH\u002FA9wBCWRUWxTlAAAAAElFTkSuQmCC' \u002F%3e%3c\u002Fsvg%3e\" width=\"869\" alt=\"Zsh first time config\" data-srcset=\"\u002Fassets\u002Fstatic\u002Fimage.82a2fbd.634d41da8b4ced823678122f9c298cb9.png 480w, \u002Fassets\u002Fstatic\u002Fimage.372248f.634d41da8b4ced823678122f9c298cb9.png 869w\" data-sizes=\"(max-width: 869px) 100vw, 869px\" data-src=\"\u002Fassets\u002Fstatic\u002Fimage.372248f.634d41da8b4ced823678122f9c298cb9.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fassets\u002Fstatic\u002Fimage.372248f.634d41da8b4ced823678122f9c298cb9.png\" width=\"869\" alt=\"Zsh first time config\"\u003E\u003C\u002Fnoscript\u003E\nIf you've made it here, congratulations! Zsh is now installed and working.\u003C\u002Fp\u003E\n\u003Ch2 id=\"customization\"\u003E\u003Ca href=\"#customization\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECustomization\u003C\u002Fh2\u003E\n\u003Cp\u003ESilverblue's default bash shell contains some important tweaks which, for example, provide the purple indicator present when inside the toolbox. These tweaks are a must-have for me, so I'll be implementing them in my prompt theme for zsh. First, though, I'll install my zsh framework of choice, Zim: \u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ecurl -fsSL https:\u002F\u002Fraw.githubusercontent.com\u002Fzimfw\u002Finstall\u002Fmaster\u002Finstall.zsh | zsh\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThese next steps may differ a bit depending on the framework you choose, but the principles are the same. Currently, there is no way of knowing whether or not the shell is running inside toolbox, so we'll start by fixing that. \u003C\u002Fp\u003E\n\u003Cp\u003EThe default Silverblue bash config uses a function that looks something like this to return whether or not toolbox is active: \u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Eif [ -f \u002Frun\u002F.containerenv ] \\\n   &amp;&amp; [ -f \u002Frun\u002F.toolboxenv ]; then\n    PS1=$(printf &quot;\\[\\033[35m\\]⬢\\[\\033[0m\\]%s&quot; &quot;[\\u@\\h \\W]\\\\$ &quot;)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn other words, the presence of \u002Frun\u002F.containerenv and \u002Frun\u002F.toolboxenv is what indicates that the shell is running inside toolbox. We can use this in our zsh config to append the purple ⬢ symbol, albeit a bit more elegantly.\u003C\u002Fp\u003E\n\u003Cp\u003EI took my prompt theme of choice, gitster, and duplicated its folder in ~\u002F.zim\u002Fmodules (this process will be similar for oh-my-zsh and others). I then edited my new prompt theme and added a function to detect the toolbox:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E_prompt_toolbox() {\n  if [ -f \u002Frun\u002F.containerenv ] &amp;&amp; [ -f \u002Frun\u002F.toolboxenv ]; then\n  \tprint -n &quot;%F{magenta}⬢ &quot;\n  fi\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThis function uses the same detection logic as the bash version, and uses the much more elegant \u003Ccode class=\"language-text\"\u003E%F{}\u003C\u002Fcode\u003E zsh color syntax to switch the color to magenta before outputting the ⬢ character. Next, when the prompt variable, PS1, is defined at the end of the theme file, I added a call to \u003Ccode class=\"language-text\"\u003E_prompt_toolbox()\u003C\u002Fcode\u003E at the beginning, resulting in the proper output of the indicator if and only if toolbox is active. \u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003EPS1=&#39;$(_prompt_toolbox)%(?:%F{green}:%F{red})➜ $(_prompt_gitster_pwd)${(e)git_info[prompt]}%f &#39;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENow, time to test it out! I saved my new custom theme and enabled it in \u003Ccode class=\"language-text\"\u003E~\u002F.zimrc\u003C\u002Fcode\u003E. After running \u003Ccode class=\"language-text\"\u003Ezim compile\u003C\u002Fcode\u003E to build my new theme, I restarted zsh and was greeted with the same prompt as before. This time, though, entering the toolbox presented that small, purple indicator; finally giving me the beauty of a custom shell combined with the helpful utility that Silverblue's default configuration provides. \u003C\u002Fp\u003E\n"}},{"node":{"title":"NixOS Configuration Notes","path":"\u002Fnix-os-configuration-notes\u002F","date_published":"5. April 2021","timeToRead":3,"description":"","content":"\u003Cp\u003EI recently began using NixOS, a declarative, immutable Linux distro, as my daily driver. NixOS has a configuration file, \u003Ccode class=\"language-text\"\u003Econfiguration.nix\u003C\u002Fcode\u003E, which allows me to configure the entire operating system's state, packages, and configuration in a single, commitable file. \u003C\u002Fp\u003E\n\u003Cp\u003EIf you'd like to take a peek at exactly what that looks like, this git repo contains the entirety of my system configurations: \u003Ca href=\"https:\u002F\u002Fgit.thomasfamily.duckdns.org\u002Fmichael\u002Fnix-dots\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fgit.thomasfamily.duckdns.org\u002Fmichael\u002Fnix-dots\u003C\u002Fa\u003E. \u003C\u002Fp\u003E\n\u003Cp\u003EI'll go ahead and explain what makes this so useful in a single line:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Evirtualisation.docker.enable = true;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EWith this single line in my \u003Ccode class=\"language-text\"\u003Econfiguration.nix\u003C\u002Fcode\u003E, docker is now installed and running on my system. Really. No adding a repo, fiddling with the package manager, or enabling services. It just works. \u003C\u002Fp\u003E\n\u003Cp\u003EAdding a few more lines gets me a full system configuration which has everything just the way I like it, with the ability to upgrade and roll-back at will, as well as even provision another system with the exact same settings. \u003C\u002Fp\u003E\n\u003Cp\u003EBut this isn't just any old configuration file. You may have noticed the \u003Ccode class=\"language-text\"\u003E.nix\u003C\u002Fcode\u003E extension used on our system configuration file. This file extension is for the \u003Ca href=\"https:\u002F\u002Fnixos.wiki\u002Fwiki\u002FNix_Expression_Language\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E\u003Cstrong\u003ENix Expression Language\u003C\u002Fstrong\u003E\u003C\u002Fa\u003E\u003Cstrong\u003E,\u003C\u002Fstrong\u003E a language designed specifically for use with the Nix package manager, and by extension, NixOS. From the docs:\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EThe Nix expression language is a pure, lazy, functional language. Purity means that operations in the language don't have side-effects (for instance, there is no variable assignment). Laziness means that arguments to functions are evaluated only when they are needed. Functional means that functions are “normal” values that can be passed around and manipulated in interesting ways. The language is not a full-featured, general purpose language. Its main job is to describe packages, compositions of packages, and the variability within packages.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003ENix is a language that is both incredibly powerful and a bit challenging to learn. Unfortunately, the documentation can be lacking at times, and I ended up having to read through package definitions and other users' configs to get an idea of both how to use the language and the options that are available. Once you've got a hold on it, though, Nix will quickly become your new best friend. \u003C\u002Fp\u003E\n\u003Cp\u003EFor a quick intro to the Nix language, \u003Ca href=\"https:\u002F\u002Fmedium.com\u002F@MrJamesFisher\u002Fnix-by-example-a0063a1a4c55\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ENix By Example\u003C\u002Fa\u003E is a wonderful resource to get you started. Some basic knowledge of the syntax is definitely helpful in putting together a working config. \u003C\u002Fp\u003E\n\u003Cp\u003EBelow are a few notes, tips, and tricks from my experience getting into NixOS as a beginner.\u003C\u002Fp\u003E\n\u003Ch2 id=\"getting-started-with-home-manager\"\u003E\u003Ca href=\"#getting-started-with-home-manager\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EGetting Started with Home Manager\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fnix-community\u002Fhome-manager\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EHome Manager\u003C\u002Fa\u003E is an incredibly powerful tool for extending the declarative Nix approach to the userland, and brings with it configuration options for nearly everything. \u003C\u002Fp\u003E\n\u003Cp\u003ETo get started with Home Manager, read over the \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fnix-community\u002Fhome-manager\u002Fblob\u002Fmaster\u002FREADME.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EREADME\u003C\u002Fa\u003E and follow the installation instruction there. Be sure to add the home-manager channel which corresponds with your NixOS version. Once you've done that, go ahead and open your configuration at \u003Ccode class=\"language-text\"\u003E~\u002F.config\u002Fnixpkgs\u002Fhome.nix\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E\n\u003Ch2 id=\"setting-a-custom-shell\"\u003E\u003Ca href=\"#setting-a-custom-shell\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESetting a Custom Shell\u003C\u002Fh2\u003E\n\u003Cp\u003EIn order to set a custom shell as the default shell for a user, you'll have to set it in configuration.nix. First ensure the shell is enabled, i'll be using zsh in this example: \u003Ccode class=\"language-text\"\u003Eprograms.zsh.enable = true;\u003C\u002Fcode\u003E. Next, set the user's shell property to the shell package in use: \u003Ccode class=\"language-text\"\u003Eusers.users.{yourName}.shell = pkgs.zsh;\u003C\u002Fcode\u003E. After running \u003Ccode class=\"language-text\"\u003Enixos-rebuild switch\u003C\u002Fcode\u003E and rebooting, zsh should now be your user's default shell. \u003C\u002Fp\u003E\n\u003Ch2 id=\"visual-studio-code\"\u003E\u003Ca href=\"#visual-studio-code\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EVisual Studio Code\u003C\u002Fh2\u003E\n\u003Cp\u003EVisual Studio Code, my editor of choice, can be both installed and configured through Home Manager, making it easy to keep consistent configurations across systems. For example, the following configuration will install the Nix extension for proper syntax highlighting &#x26; code editing features, as well as configure some editor settings like the default font and tab size. \u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E{ config, pkgs, libs, ... }:\n{\n  programs = {\n    vscode = {\n      enable = true;\n      extensions = [\n        pkgs.vscode-extensions.bbenoist.Nix\n      ];\n      userSettings = {\n        &quot;editor.fontFamily&quot; = &quot;&#39;FiraCode Nerd Font&#39;, &#39;Droid Sans Mono&#39;, &#39;monospace&#39;&quot;;\n        &quot;editor.tabSize&quot; = 2;\n      };\n    };\n  };\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Evscode.nix\u003C\u002Fp\u003E\n"}}]}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.91f6f24e.js" defer></script><script src="/assets/js/page--src--templates--tag-vue.0c7924f4.js" defer></script>
  </body>
</html>