<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Using ZSH with Toolbox on Fedora Silverblue 33 - Michael Thomas</title><meta name="gridsome:hash" content="6971b0615edb4f8a439512f40b9ea0f4bb68a781"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="A simple, hackable &amp; minimalistic starter for Gridsome that uses Markdown for content."><meta data-vue-tag="ssr" name="description" content="Setup your own customized shell within Fedora Toolbox, all while maintaining convenience features from the default shell."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.8e7ea103d657b5eaf0ae67bb8fef1355.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.8e7ea103d657b5eaf0ae67bb8fef1355.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.8e7ea103d657b5eaf0ae67bb8fef1355.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.8e7ea103d657b5eaf0ae67bb8fef1355.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.8e7ea103d657b5eaf0ae67bb8fef1355.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.8e7ea103d657b5eaf0ae67bb8fef1355.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.8e7ea103d657b5eaf0ae67bb8fef1355.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.8e7ea103d657b5eaf0ae67bb8fef1355.png"><link rel="preload" href="/assets/css/0.styles.496ec2f4.css" as="style"><link rel="preload" href="/assets/js/app.88f80b0e.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.2a4c0239.js" as="script"><link rel="prefetch" href="/assets/js/9.4a1de45d.js"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.566aaccc.js"><link rel="prefetch" href="/assets/js/page--src--pages--blog-vue.b33ca2d5.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.1104ba6c.js"><link rel="prefetch" href="/assets/js/page--src--templates--site-page-vue.332202f8.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.f56cad3b.js"><link rel="prefetch" href="/assets/js/vue-remark--content--pages--about-md.bb240ebb.js"><link rel="stylesheet" href="/assets/css/0.styles.496ec2f4.css"><script data-vue-tag="ssr" hid="partytown">!(function(w,p,f,c){c=w[p]=Object.assign(w[p]||{},{"debug":false,"lib":"/partytown-lib/"});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.6.1 - MIT builder.io */
!function(t,e,n,i,r,o,a,d,s,c,p,l){function u(){l||(l=1,"/"==(a=(o.lib||"/~partytown/")+(o.debug?"debug/":""))[0]&&(s=e.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(w,1e4),e.addEventListener("pt0",f),r?h(1):n.serviceWorker?n.serviceWorker.register(a+(o.swPath||"partytown-sw.js"),{scope:a}).then((function(t){t.active?h():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&h()}))}),console.error):w())))}function h(t){c=e.createElement(t?"script":"iframe"),t||(c.setAttribute("style","display:block;width:0;height:0;border:0;visibility:hidden"),c.setAttribute("aria-hidden",!0)),c.src=a+"partytown-"+(t?"atomics.js?v=0.6.1":"sandbox-sw.html?"+Date.now()),e.body.appendChild(c)}function w(t,n){for(f(),t=0;t<s.length;t++)(n=e.createElement("script")).innerHTML=s[t].innerHTML,e.head.appendChild(n);c&&c.parentNode.removeChild(c)}function f(){clearTimeout(d)}o=t.partytown||{},i==t&&(o.forward||[]).map((function(e){p=t,e.split(".").map((function(e,n,i){p=p[i[n]]=n+1<i.length?"push"==i[n+1]?[]:p[i[n]]||{}:function(){(t._ptf=t._ptf||[]).push(i,arguments)}}))})),"complete"==e.readyState?u():(t.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u))}(window,document,navigator,top,window.crossOriginIsolated);document.currentScript.dataset.partytown="";</script><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7DK3PZ81VY"></script>
    <script type="text/partytown">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7DK3PZ81VY');
    </script>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        var event = new Event("themeChange");
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.documentElement.style.setProperty('color-scheme', newTheme);
          document.documentElement.classList.remove('light');
          document.documentElement.classList.remove('dark');
          document.documentElement.classList.add(newTheme);
          window.dispatchEvent(event);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true" class="bg-true-gray-100 dark:bg-true-gray-900 text-true-gray-900 dark:text-true-gray-100 min-h-screen transition-colors duration-150"><div class="navigation"><div class="border-primary-600 dark:border-true-gray-700 border-t-8"><nav class="wrapper py-6"><div class="flex flex-wrap items-center justify-between gap-5 px-10"><div class="logo"><a href="/" class="active"><h1 class="text-true-gray-700 dark:text-true-gray-200 text-2xl font-semibold">
            Michael Thomas
          </h1></a></div><div class="mobile-button block sm:hidden"><button role="button" aria-label="Open main menu" class="bg-true-gray-200 text-true-gray-900 dark:bg-true-gray-800 dark:text-true-gray-100 relative h-9 w-9 cursor-pointer rounded-full p-2"><span class="sr-only">Open main menu</span><div class="absolute left-1/2 top-1/2 block w-4 -translate-x-1/2 -translate-y-1/2 transform"><span aria-hidden="true" class="h-0.25 absolute block w-full transform bg-current transition duration-200 ease-in-out  -translate-y-1.5"></span><span aria-hidden="true" class="h-0.25 absolute block w-full transform bg-current transition duration-200 ease-in-out"></span><span aria-hidden="true" class="h-0.25 absolute block w-full transform bg-current transition duration-200 ease-in-out  translate-y-1.5"></span></div></button></div><div sm="bg-transparent dark:bg-transparent basis-auto flex-row py-0 gap-5" class="menu bg-true-gray-200 dark:bg-true-gray-800 flex basis-full origin-top transform flex-col justify-center gap-2 rounded-md py-2 transition-all" style="display:none;"><a href="/blog" class="nav-link active">
            Blog
          </a><a href="/about" class="nav-link">
            About
          </a><button role="button" aria-label="Toggle dark/light" class="cursor-pointer"><div sm="block leading-0 mr-0 h-9 w-9 rounded-full p-2 bg-true-gray-200 text-true-gray-800 dark:bg-true-gray-800 dark:text-true-gray-100" class="icon inline-block leading-[2.25rem]"><div style="display:none;"><span data-icon="ph:sun" class="iconify h-5 w-5"></span></div><div style="display:;"><span data-icon="ph:moon-stars" class="iconify h-5 w-5"></span></div></div></button></div></div></nav></div></div><div class="page mb-auto mt-5 md:mt-10"><div class="post-wrapper text-true-gray-900 dark:text-true-gray-100"><div class="post-title"><div class="post-tags"><a href="/tag/Fedora%20Silverblue/" class="text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-500 mr-2 rounded text-sm font-semibold uppercase tracking-wide transition-colors"><span>#</span> Fedora Silverblue
  </a><a href="/tag/Linux/" class="text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-500 mr-2 rounded text-sm font-semibold uppercase tracking-wide transition-colors"><span>#</span> Linux
  </a></div><h1 class="text-true-gray-800 dark:text-true-gray-200 post-title__text mb-4 mt-2 text-3xl font-bold md:text-5xl">
        Using ZSH with Toolbox on Fedora Silverblue 33
      </h1><div class="post-meta text-thin text-true-gray-600 dark:text-true-gray-400 text-sm md:text-base">
  Posted November 19, 2020
  <span class="text-true-gray-500 px-1">•</span>
    3 min read
  <span class="text-true-gray-500 px-1">•</span>
    Updated April 5, 2021
  </div></div><div class="post__header post-object-wide"><figure class="mx-auto w-fit"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 430' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e5279e4abb46ccb7e26991fee3c2d3be'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e5279e4abb46ccb7e26991fee3c2d3be)' width='860' height='430' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAAsSAAALEgHS3X78AAADqElEQVRogeWW3U4bRxTH5wlqinHsnZ3Z9a53ba8/WqVAL4IRJnZJiG0IsBiiOHzkpsjYkaqQmyoXvUPiLi/R9%2bFFeIV/NbPe2FCcOK2ioyhIP83OmTnsf87OOcfMsix8zzBqAdQwagHUMGoB1DBqAdQwagHUMGoB1DBqAdQwagHUMGoB1DBqAdQwagFfCymlHm3bvjWfOQBywkE/y/vXpu7/j4I/5f%2b5PXdtam6a5kf7fT7scy%2b6NbenH0BFWgihsUf74ujH4zS/yXXlf1vDv33laM/kmpzQyoWEEBKOk0WhUIDjOLPfADnaKKQJLgyYkkd2U0CmDEgjiijnXItVoyKTycB1XY1hGNqWTqf1czxybn5cm9yjfNWz%2blq%2b74%2b/GOeQRgZSfUX1zI3o8J4HKczxmmnCklL7qeBXix4yD1J42evh5uYGFxcXmJ%2bfRzabneUG2DCEgZ9yD/Fh/W/Ugw1kzAewCx6cvRrsxiJsLtDutNFoPMb6el2Pu7s7ePHiEIeHB6jX69je3sLr16fY3dnB8vISVlYeIQz3sLn5FPv7oV5vt1o4Onql/TqdtrYPh%2bfwPB8ik4ZT/w3udhfZWl3jNJ4iu/oYucNj2L8sw23vIbuyBvfZc9ieD8PgeFjy8EdYQ3L%2bR/T7fai/y8tLzM3N6ZswUwpwwVF2q/ir9gGPCmvImOkoAOEqrI0l%2bLaLXu8lVldrGAz6%2bgCnpyfY2uqg1XqmD6Lm79//ieOjV1haXMSTJxsYnPd1UNThVcBOTo7x7uIt3rwZYjg4x8FBF93uPopBAJFKwe2EyB39Dvd5F7n9nj6w09zUgXDWGsgdHMPZaMFpbMISJgxToPlrGa3az/ghkcBwONABuLq6QiKRmC0AciIFUmZSByO6jgIyzWFxoa9qsVhEqVRCUCyiXCqhWq3qXK5Uysjn85pcLqdJJpOoVCpoNpvwfQ%2blUqCvo/ofSpTK03a7pd8TBIGeC3WtXTciX4BVCGAH5Wju52F5fjQWA1j5YpQSlgU3a8OUFlKpFMIwxPX1Nc7OzrCwsDBrCljjFjIqMpNFMC42Kggqp6MxqgNxbVA2xbgoRgVS5Xq8FlfoeI%2bqBbFNERc7zSjPpcnHNk1sj/arOiAmip3SooKv6s0XdQHrbsv5n23ubk%2be1g0%2b1YlmeYe8p1XHX/2LfwdY3zhTW/n3EgBrRhi1AGoYtQBqGLUAahi1AGoYtQBqGLUAahi1AGoYtQBqGLUAahi1AGr%2bATHnBDXKR7SBAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="860" data-src="/assets/static/prompt.07cc2b7.73ba7a3035430c02dbb55962aa1a518c.png" data-srcset="/assets/static/prompt.a67b0b2.73ba7a3035430c02dbb55962aa1a518c.png 480w, /assets/static/prompt.07cc2b7.73ba7a3035430c02dbb55962aa1a518c.png 860w" data-sizes="(max-width: 860px) 100vw, 860px" class="shadow-opacity-10 rounded-lg shadow-lg shadow-black g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/prompt.07cc2b7.73ba7a3035430c02dbb55962aa1a518c.png" class="shadow-opacity-10 rounded-lg shadow-lg shadow-black g-image g-image--loaded" width="860" alt="Cover image"></noscript><!----></figure></div><div class="post"><ul class="-mr-15 sticky top-4 float-right hidden lg:block share"><li class="mb-2"><button aria-label="twitter share link" role="button" class="text-true-gray-300 dark:text-true-gray-600 hover:bg-true-gray-200 dark:hover:bg-true-gray-800 duration-400 block rounded-full transition-colors"><span data-icon="mdi:twitter" class="iconify m-2 block h-6 w-6 cursor-pointer transition-colors"></span></button></li><li class="mb-2"><button aria-label="reddit share link" role="button" class="text-true-gray-300 dark:text-true-gray-600 hover:bg-true-gray-200 dark:hover:bg-true-gray-800 duration-400 block rounded-full transition-colors"><span data-icon="mdi:reddit" class="iconify m-2 block h-6 w-6 cursor-pointer transition-colors"></span></button></li><li class="mb-2"><button aria-label="telegram share link" role="button" class="text-true-gray-300 dark:text-true-gray-600 hover:bg-true-gray-200 dark:hover:bg-true-gray-800 duration-400 block rounded-full transition-colors"><span data-icon="mdi:mastodon" class="iconify m-2 block h-6 w-6 cursor-pointer transition-colors"></span></button></li></ul><div class="post__content prose dark:prose-invert w-prose text-true-gray-900 dark:text-true-gray-100 max-w-full text-lg md:text-xl"><p>Fedora Silverblue is one of the most interesting Linux distros I have tried to date, and I ended up choosing to use it as my daily-driver for its stability, ease of updates, and cleanliness. However, one of my biggest must-haves was a proper, customized shell. </p>
<p>My personal choice of shell is ZSH with the <a href="https://github.com/zimfw/zimfw" target="_blank" rel="nofollow noopener noreferrer">Zim Framework</a>, giving me a fast and simple shell experience without too much hassle. However, the basic installation steps for these differ a bit on Fedora Silverblue. </p>
<h2 id="installation"><a href="#installation" aria-hidden="true"><span class="icon icon-link"></span></a>Installation</h2>
<p>First, install <code class="language-inline-text">zsh</code> as a layered package on the host system with rpm-ostree:</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=michael data-host=pc></span></span><span class="token function">sudo</span> rpm-ostree <span class="token function">install</span> <span class="token function">zsh</span></code></pre></div>
<p>After doing so, go ahead and reboot to enter the new ostree deployment, which will now contain zsh.</p>
<p>Next, we’ll go ahead and install zsh in toolbox. Enter the toolbox with <code class="language-inline-text">toolbox enter</code> and then install <code class="language-inline-text">zsh</code> the old fashioned way:</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=michael data-host=pc></span></span><span class="token function">sudo</span> dnf <span class="token function">install</span> <span class="token function">zsh</span></code></pre></div>
<p>Now that we’ve got zsh installed everywhere, type <code class="language-inline-text">exit</code> to get back to the host system. Since <code class="language-inline-text">chsh</code> is not included on Silverblue, we’ll use <code class="language-inline-text">usermod</code> instead to switch to our shiny new shell:</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=michael data-host=pc></span></span><span class="token function">sudo</span> <span class="token function">usermod</span> --shell <span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> <span class="token function">zsh</span><span class="token variable">)</span></span> <span class="token environment constant">$USER</span></code></pre></div>
<p>Alternatively, Fedora offers <code class="language-inline-text">lchsh</code> which provides a similar interface to <code class="language-inline-text">chsh</code> on other Linux systems. </p>
<p>Start a new shell and you should be greeted by the ZSH first time configuration, which will look something like this:
<img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 869 451' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-85dec52373f77aba650daaeba6fe6883'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-85dec52373f77aba650daaeba6fe6883)' width='869' height='451' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAhCAYAAABpwa0hAAAACXBIWXMAAAsSAAALEgHS3X78AAAL/UlEQVRogZ3Z2W4kxxEFUH6BHwwbsKQRh%2bsMd7LZbO77vpNDzow0WgwB9o8YejH002mcyIpmiSApyg%2bFrso1MvLeG5HZAx%2b/%2b74cnpyV2/tP5fzquuwdHpdOb7lc3X4ox%2bcX5eD4tMx2FsvlzW25ur0rC91etOutrpeVja3y6fsvZf/4pMx1uuXm7r4cnp5FH/0PT07LyflFPEur6%2bXDx0/l5Pyy7BwclrPLq3JxfVN6a%2btlbGKqjLybKKPvJ198nmrTLnvu/aVnYHpuocx3e2V1YyuMmVtcimd9e6cs9lZiwZOz86W3tlGWVtfivbuyVsYnp8vU3HwsrLO0HItYXF4p893af21zO9p1V1ZjwTMLi/G7sLQcj36cOLuw2DfGGJ7XGD6W7ZvfdvmfcsDgyFj5dni0fDs8Vry/GRqJ5%2bvBoSj/5u1w1H096Hc02qjz%2b3Z0vHz9dji%2bh8ffRzt9o18zTnusr7592%2b%2bXbQdHxsPYWjba75/t1A2NvYtvj3l8V5sfnlpfx1D/WicMrG/tlI3t3TIxM1feTc2U7b2DsrW7Xw5OTsvW3n7ZPTgq2iiziysbm2X/6CTaeddG2%2bn5Tlle3wgKdZdXy/LaRtnc2Qsk7OwfBqK29w8CNeaCOu3mF5diB411dHZezi6vy97RcaBFf/XsM5/%2bMwudsrDUC5qh2/7RcTm/uon22imDZM57FQJWNrbKxk51AENQwWKVrW5ulasPd2V9ezcWArqMYgiDLcricBv0p%2bYWwngG0I0NbRm%2bdxDjbu7ulaWVtZinashmUMROcZhFHZ9dhPbQFfOjHHssMLRmcanMdrrhdHpydHoefdStbW1H305vpY%2bCP3TA0Ni7aAxaeE3grj/chTc93o/PzkMkLYAYWowdvL67L5e3H8rkzFy8cwThY7hF2gULNAZRJHp26/b%2bY8zDUO/q1RFk5cajJ2nXYwoE3frUfaBA0uhPUWC0JRqMBjm7CRHT8wshcKDP6wldSOAssFfu3S942rHJ2Uon43pX58mxtDO28XzPNXWopm4qxpjvi%2bJz4viSYL5aBIfGqod18BChb96OhDc9RDC9q5y4teveDFWP65c7oP3Q%2bPv%2brqWYZtvc0b5gvh2Ocb8aHOqP3e7rSUHMhf3RAl/tgI3t3eARj7%2bbmi7n1zchRnaEwIE1fgqH4Lp7cBi7ifviPtE6Oj0LPtINXCScNIBY4i5uJ63AFzqU1/GOIg8hZtqsbm4HhVAFndiDdjQoQyznvmZxr3JAd2UtJnw/PROQMhGuW6TJiJ58gIMInEWANadYhDKaQNAIHGGUL8gvLE6dmK8tPTAHymhjHvkFkdOOuJoTzQgaW2wGB4sYc4vdENrXouDVecCboZHYmaSA2P6mFfMT1qCa3zU3GIoncoUGslEWucNo5A45/j/eDAbMh5uYH7DvtxtqcoYK98wdjCN30K9NiaSDBbA7KZP0ye%2bs65e1ynO9A3YN1AmSnQFBYUzosgNi%2b%2bLyauwUgSRUEEO81EGE9kTNThsrwuT6Zlle3wzk%2bJUf6Gce46GQ8fW1%2b1Q/20IGVHg3XuYM2da8bLUIeQXUaQdV6tjBLoKalILYCN1bO9FnZr5TJqZnywAjcDBVF1TFVb%2bM/O6HH4PDvg28e3gU3DeRvnjrCRUXNu/ug79nV9fl9OIyIA3CGepAmDb4ZrTn9KKeC7StYfi%2b3Nx/DF0xnsTH3HTi9PIqxkVRDrARaOhsYRx1NM04dOvg%2bCTGEcqdW9hu04PWM3NlIJW7TYEK2wq1TDvju3nPSKAs2yXERIpU7nZkSMWPfq26duyOaNJv%2bxB50Cth3Y8yTY7gaUeU%2bG1RpZ0jZP6Qax1BAR7MuA4BIAKmdsPvxMxsjdWL3fJ%2bejbEzW4HlHsrsRPKHWrsLvWn8vW9xn/9fWtnV1CJ%2bBJTZZlnQKH3RCMDQR%2bd5ByRZzQpOwjLFzIfUVfX0qt2KmvyFLY%2bJ5gDlBosGGhgqSTogygngBfofPnp5zgmgy%2bD8FKIEgY55Ief/xltQc6kIHf/%2bbsoF0o51mLuPn0OitAJTsP1z19%2biPAJvupREk8Joc1BCdAXDs2d4ZmuWLAs8/sff4oyVKIdFs1u9G0ftx87YiChkJkgQYkdWVgMITEA7r2fmumLCwNMQigtmKjZGaFLndAZB5j9gygjThwXYrayGppAlMyDnxZP%2bKTGxmI8Z8o5zJ1iaWOS%2b20lz0WxP8set3kubA60MydwYgz4KLMIiwZ/A1mM05byONzs7MXOEESLgSZPKnlEiObixO45HKUIquMQDtxpDlc1kqxFG86ABLtMgM2nn7n%2bn3j/LAWGmrQ0PRln/RCnWp7ik%2bnu47wgz/iRFzRxnZB5J2ApXPoR0XpvkKmx8WoOoc/DXFWspMY5X87dFue8R8gcIcvbsd986YAnEbDU5AF2nwbYObzCV9/KQ7ga%2bGpPXKAEIkAT/IkatMgoaYJyu6Wv77xNYpD4G3nA1nbstDkIasZ67cwHFeK4b3lCZIybW6FFxqwZ5XroApSpMx/UsVX/lwRwlAPwlOClIoul7vBQIflItNwHSktv7j5Gm4zZFze3IVTER27P8Bgj4vFZwFe7n3/5JWBsUo7ldO0JGF4bH31Qg3M5iCASNotHvThXnJxGzGc32wi4XIWQXt58iDp0I8LyARTiqOeoMJCxMiHycL1UYR9lGX8bWOnoPeN90ki7zBvaaaurqkxL27E784%2bkRTtVzXFQpQ3zdj5R7R3rn1IfnyDT/swZnhLDAV4EYV5SkXG73gd0Qln92nGnRSip8boTYuU902g7m3Xe9ZNH5NlfXcT75l0bdMi6zB3SFmXmVZ5Xdr5zfLYpr/nGYvTzzcYM68aQuyh7EgG7B0cBxVys2O32B4SEOQOAFm1Qn2ksKKoXxuQIaICLGecZBbbo5FiL65kWi/ceCZEosra1E1BGu0rH%2bRBXuvHLv/4d9DKfRYI1itUzwlK0l2OIPLTJ3NrXq7LzoBIb0ULilKLYd8D4ZN3VLIhL0h0HicUQJrHY4sVij7OAiQmR8nqeP43ExXdcfXd7ESIjFO7sxpi%2bGRhHbOM1ZXkosnN4nflF3C0cHYcdHEEw7ar2nMjBRM9Ychft4xK12%2btfyNYD1UZsXN5QvZgIvZuaCW8RJtdUDCMq/cRm76B8%2bfGnGgncEK/Xm9zI6jrd%2bDWpk6P4fnF9G4iJW%2bT9g3qoWVmLPhZy0E%2bAamoNFQxWzqlQEchqTnEoWC9w6uENCiRMe4dH4SDoYzPb8oTo9/EfL7/TgNFHhSALrhYHdnYYVO0cKhgUBzlpa3cvkhXhSx%2bpMQRInPTVT5gSETiBUzlTdhmwPj6NhVuU22dOyhskp8mMGnHjdHEZcOcY39t7%2b2FzCl9bhN0YtXOBlxKigccVPJ7CIrbjXYpQ8Kw5rFg0R4i3ITTznYjhHEfkMk7X/MA/RGtBNfQxttAWucbkdJNjVFTFv0ZNbiIMh/B1uhHbja%2bdvlL1py5O2xeoj7%2bfTISGWpmgggwzGcry352HS9CR8PLDLU5ebD4cR%2bMfo8Gh/hH34RL04Wiat0sZhvNCNDLMVqjLsWrmmZlotStDX//Y3jouR5bYzKvfcxnhgEyLWvOmAioK9jgqfOQFCcGxK/XyZC4U2zuoSzYC8t16hxinwpPT2EmGQQ%2bIgy4qgXxw9%2bi4L1ZsILrq0aWqftWhUPC5%2bXoeOD4JarHLeITSeISXQOvLHjbiPzrpD0WPI8BopsLCRZ7LdU415hSO4BDQ9M7o%2bWayUN/t3RAyC9CHABKtKnr1T9P4x2lzK9qgk0XGX3BxjbUeEcE4NIaQ6Q/y%2bUesRbMPZRycOIZNNCGv3%2bK6bnuniTDbQR19tacb%2bjxJgYm49Kj5skF5ixE5sUlMYHcIHy8SqNuPnyLB8S6NFT1MkiFPKJLG2iXpMhGDAv8kQZR3Y%2ba11t%2b%2b%2bqb859dfy39/%2b6385a9/7x9p8wap/QdqO/NMqrT/PepToHUb5YD1JAVGG7HI%2b4Cq6Mv9W53MCmV06ah6S1Szsfy3yJN/mYeIErRu7yHLa/7tMWb%2bo6TO/OOT9W80cLZbUuLf/eX9wj9AYxN/fBR%2bSQT/B5e5CHV%2bpXyeAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="869" alt="Zsh first time config" data-srcset="/assets/static/image.82a2fbd.634d41da8b4ced823678122f9c298cb9.png 480w, /assets/static/image.372248f.634d41da8b4ced823678122f9c298cb9.png 869w" data-sizes="(max-width: 869px) 100vw, 869px" data-src="/assets/static/image.372248f.634d41da8b4ced823678122f9c298cb9.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/image.372248f.634d41da8b4ced823678122f9c298cb9.png" width="869" alt="Zsh first time config"></noscript>
If you’ve made it here, congratulations! Zsh is now installed and working.</p>
<h2 id="customization"><a href="#customization" aria-hidden="true"><span class="icon icon-link"></span></a>Customization</h2>
<p>Silverblue’s default bash shell contains some important tweaks which, for example, provide the purple indicator present when inside the toolbox. These tweaks are a must-have for me, so I’ll be implementing them in my prompt theme for zsh. First, though, I’ll install my zsh framework of choice, Zim: </p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=michael data-host=pc></span></span><span class="token function">curl</span> -fsSL https://raw.githubusercontent.com/zimfw/install/master/install.zsh <span class="token operator">|</span> <span class="token function">zsh</span></code></pre></div>
<p>These next steps may differ a bit depending on the framework you choose, but the principles are the same. Currently, there is no way of knowing whether or not the shell is running inside toolbox, so we’ll start by fixing that. </p>
<p>The default Silverblue bash config uses a function that looks something like this to return whether or not toolbox is active: </p>
<div class="gridsome-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token keyword">if</span> <span class="token punctuation">[</span> -f /run/.containerenv <span class="token punctuation">]</span> <span class="token punctuation">\</span>
    <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> -f /run/.toolboxenv <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">"\[<span class="token entity" title="\033">\033</span>[35m\]⬢\[<span class="token entity" title="\033">\033</span>[0m\]%s"</span> <span class="token string">"[\u@\h \W]<span class="token entity" title="\\">\\</span>$ "</span><span class="token variable">)</span></span></code></pre></div>
<p>In other words, the presence of /run/.containerenv and /run/.toolboxenv is what indicates that the shell is running inside toolbox. We can use this in our zsh config to append the purple ⬢ symbol, albeit a bit more elegantly.</p>
<p>I took my prompt theme of choice, gitster, and duplicated its folder in ~/.zim/modules (this process will be similar for oh-my-zsh and others). I then edited my new prompt theme and added a function to detect the toolbox:</p>
<div class="gridsome-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function-name function">_prompt_toolbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> -f /run/.containerenv <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> -f /run/.toolboxenv <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    print -n <span class="token string">"%F{magenta}⬢ "</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This function uses the same detection logic as the bash version, and uses the much more elegant <code class="language-inline-text">%F{}</code> zsh color syntax to switch the color to magenta before outputting the ⬢ character. Next, when the prompt variable, PS1, is defined at the end of the theme file, I added a call to <code class="language-inline-text">_prompt_toolbox()</code> at the beginning, resulting in the proper output of the indicator if and only if toolbox is active. </p>
<div class="gridsome-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">'$(_prompt_toolbox)%(?:%F{green}:%F{red})➜ $(_prompt_gitster_pwd)${(e)git_info[prompt]}%f '</span></code></pre></div>
<p>Now, time to test it out! I saved my new custom theme and enabled it in <code class="language-inline-text">~/.zimrc</code>. After running <code class="language-inline-text">zim compile</code> to build my new theme, I restarted zsh and was greeted with the same prompt as before. This time, though, entering the toolbox presented that small, purple indicator; finally giving me the beauty of a custom shell combined with the helpful utility that Silverblue’s default configuration provides. </p>
</div></div><div class="post-navigation-arrows text-true-gray-800 dark:text-true-gray-200 grid gap-2 sm:grid-cols-2"><div><!----></div><div><a href="/blog/nix-os-configuration-notes/"><div class="hover:bg-true-gray-200 dark:hover:bg-true-gray-800 group flex flex-row gap-4 rounded-md p-4 transition-colors"><div class="flex-grow text-right"><p class="font-bold">Next</p><p>NixOS Configuration Notes</p></div><div class="flex flex-grow-0 flex-col justify-center"><span data-icon="mdi:arrow-right" class="iconify h-10 w-10 transform transition-transform group-hover:translate-x-1"></span></div></div></a></div></div><div class="bg-light-700 dark:bg-true-gray-800 flex flex-wrap justify-center gap-3 rounded-md p-10 text-center sm:flex-nowrap sm:text-left post-author"><div class="mb-4 h-40 w-40 flex-shrink-0 rounded-full md:mb-0"><img alt="avatar" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-63c18d3b97ec342fee7eb1b44e9c8151'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-63c18d3b97ec342fee7eb1b44e9c8151)' width='512' height='512' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAZr0lEQVR4nM1bB1RUV/r/ZjBlT3LO7j%2bbvmezxgKCoIiIvQtSBOkaREE6SDU06b0r2KJmjd3YozFRimIBKUMRsCYmJqZZYixrosLMe%2b/7n%2b/Oe8MMDJZsssk955735pV77%2b/39fsA4Hdq%2bSmpYGNqCC6jh0PMQh8IdHORTzF8ux8AyKRn3gSQO1pZ9AufN1e%2beOECWLIoDK58ew22btgE6TFRELnAWzbFsL8BPWskB7nz%2bNHySYP7w4T%2bb8DC2Y7wp21Bnh7s%2bAoAzB5rJWfX3F1hqtEAYGjE9jYAOFpZQIS3F%2bzcuo0uyaYNGdDP8tW/sccW%2b/uxd6gNe0EOrhPHgdPokXLb4caM3L2798KfriWFh8G2TVsAEcFplLmB%2b5SJ7HqIp/to1wljU1wnjNnjNNqiavaYkeVuE8Z%2b4DJ%2bTNi7AX4j2zrOPU/qMc14IFi98Xf2zpKw0EHuk8dnzB5jWTF77Kg9HlMmWrlNGAOu40fL3SaOhdnjRsOfqqUvXgwNilYGntTbdbwVvGMzw9R1wpiqWZbD0W6EKdoON0E786Gs07n9CFOcZWmOHpPHfe0xefyH7hPH5nhMHl80d9qkaqfRFg/Ys8NN2LNOVhZdIZ7uw/2dncDHwVbuOWMa/KnakBefZeCfBZCbvPgc%2bDra%2bzpYDOsSQQv25kNV9iNMqXNiV9mZD6XOAEqEsN/DjBlwui8%2by8hwnzR%2bvdXrfwOLv78gTwwPhz9NK0hNAduRw8HeYpjBLCsL8Js9y9NxlDkDYT/CVGk/wlSgTiDEo%2bZc7LxICD2rFEELduKz9Jtpg4VZ1YRnmAMFBysL%2bFO0pOgYJvmQOR6yuJAQiAnwf3P2GMtbtsONCaCqB1DUdPV1JnHtY89rIgFsnFmjzD8l50ptrs30Pxg5AMRFRQM5JMvXXgJr0yHPWJsOAffJ47NEAF19gn/KLmoGellPy3awMAP7EaYGK5eW/dHwAQJcnGC%2bnQ34OzvJVywtZdecx46qEu2Z66H6j%2b%2b6kpc0gafxXMZZff3BmrUvrVu5GlKjozT5xB/WTp48BaXZORDg5iJLjIiAstKVz7uMH10hAuAdRPAOFrpq3fP8UfckAujoOGrEXX9nJytfR3vwcZgpz01MgFVFhX8M%2bLQ2JUTvbIDMUW/AtGm2cmMAcJ80brsoNRWBtjEzxpnDTXD60CFIvx0szHqB1pKyps8aaYa2w4eizTBj9p54nyOH6jzW8sv3Vq39y/sFORDr5yvDmg2Q3qb834LP7uCg/6cIcypuwaJl258J854HIbPtJ1Gstx1uws0aaSZMNTHCILuJQtP6eIzzsMZJRoNxmokR2opgCWTP7sDyhKHs2dlWw9F76mi0NiUSzJgJMT9gYYY%2bDjOXTO3/GriHJD4z8AZCoAIhp4P7/YEfutIJEc085HSoYM1FJQSe6jRYgcjuzXVx22PHJGamsjYzxrkTRwmf7UzHrtoy/KmiEPfnB2OUyzR0tByGdH%2bi0WCcaDiIgaUj9RmmQ9DZyhyTvOywdWMidmxJYs/bmBkLsyzMWCikyOI2cdwFeDmYrSOw4mq/67f/A%2bs%2b64LE078jCUvPdkFEswBRzTyktHGy4ZUoC2pFyDwjWIQ18XWz3b3RzmQAbzfCjDI%2boW5tLD44UYrXD%2bXjrcoifHCyFO8cKcaLO1LxcMki3Jzkg6ui5uDSMHcsDffA9fHe%2bGlRGF7alY4/H1uK96pL8P7xZXhiVQzTDiKBacIwY95%2btCUGfnThcNF/cEDE5wiutSgvOquSpbRxkNTGw5oLnb8t%2bIw2JQQ2CrCoiYfoZk6%2b%2bfNOcKpBiGlSRYe2IC6svoP2oy15B3MTnGJshJuSfITOmjK8cbiAgScN%2bLG8gB3/c7SEEaOsXY6dNcsZMQ9PlrHfdH73aAneLC9k/cfDBfjwZCkSma5jRjB/Qn7E1nQw7/3BCQw7g7/ENNz3eqcOAfE8xLVyspgWHoIaeUg73fXbgF9%2bXsmAhyp4iGnh5UQG4g/y8CZ%2bY2ADj4GnERfsOqtyGGmG1qZD0Nd6nHD9UAHeFoHfqihkR6nfFMkgcKzTufRbJIm9V1nEOpHYVbscj5RFkukIDhbD0HboQPQq26cM7EAMbFDhoiY%2b/7m9CMvPdhIJclprmIKHCz/9BiSEKXhGQGQzx8Bvu3jv2fAm/lhgo4ABDZwqqB15702n0GGEiTDJaLCwLnYePqwpY4Ak6UtgpN/SNW1itK/pu0fms8hxCk43NRHsTQcKXss/wqAzyAfUcxytJbyJ/3B2PcLyc50Q0cTJaM2Bjfx/Bz7xNAfxrRy828LJM053QfWVe8%2bGKvjjAQRegcqABk4Iakecv7FWsBs2hHn4%2bnVx%2bMuxpUyF9QF5HHh9nZlCTRmui/XCSUMM0cFssOC18hMhqAMxoJ4TAhSoojWFKPgdsBZh56VfmDmQT6D%2bq1rROQ7e/6wLMtpVsq%2bv3wTLaoSwJv6TQIWAAY3YxY4NHAa1obBgewuL2Z7jR%2bL3B/PwTlWxjroTuNuP0ICe55L5SCZBx/snluHR5ZFoM8wE7c2Ncf7megxqR4HWEKgQhIBGVNKawpv4f7vVIkyoRtmyc2SulyHpaUlYca4TXGsEuHjzF3A8ifJ59Ujhr4xJXj0RTSgENPJCYAuiX8VVnD7cDKOdp2pUnRZ9r3opkjO8XUW2nM/A3D1S0ss0pHO6d7O8gD1LKk/vktMkDSDneGl3Bs62NENbSwtcWHkdaW5aQ0AjSiQwTYhu4eMDGgXwbRAMLCsR/Bue0hSS23gIaCAbEgzIo77bwnuJkufEicQJBQxUIAY1cmg9xQZzFtjiz8dLmfqTpz%2b7LQnfT3wH80IcMc3PDlN8Z%2bL%2bwiAGVJ8JbMvwYc/Qs/mhTrgheR5e2p2O94%2bXqh1iRTH6TTLHWS5eGNSCyPwQW4NmTTwdgxQCxrVykylkRzXzBnGtHGQ9aaL03kUlHLiiJPuXZXWoILtD9WaIQrgtTsBJ4DWT13MYeg5xcnA25s2bjg9qV7DF7sxeiIvnTsOt6QuwcX0sfr4rDVs3JWDH1iV4WzSRnh6f7rdvWcKerXt/Ma5PmofRc6bipyUhjLR7x0ox2XMazszexeYMqFeRUBgRWiSo6BiqEC6tOPfwuRXnuyDpNCdDvAsnv3%2bC/CCgkYeKbzvB7gTK7U4gRYDtoqSVGrYVSE6QTezfIGBwO2Lupt24KW4u3j9Zhl/ty8SicGf8cm8GKmtXMFO4e6SYHan3FRl%2bpvtHS9izdK46tQI7tiZhSYQLXvs0H3%2buLsHWLSlYWNmKfs2k/oJaC8S1BCqQCUZaK4XHd%2boEmHsKDSCPsDxGC47/oITtl7sgvpU3oAiQ2s7NCFarPs%2bkrp6AjuoJGwX0USAePF6FD6ty8FZVsQYQSYyAsPOjJcyWybn1FR1uiffIgdKz9I6UOJE/UDvVIkbQw8ps3HKygc0d1MhL4CUtECRtCFEIqswOzpgiQcJpTp7b8RgNmHpUgLWfqQB2ouyl/QjhTUKVtlqJJGgYX6hAjKu/gz9WFuOtCvLYunGcjj8czMVVsZ64OtYTr36SyxxiT9XXjvWkPcsiXfGDpHnMIeo%2bW4g/VhThnYp8/LZqOYY1dqF/t/S1SGC/mUMMb%2bI3UFRwP4VySucLzj5KC6Ygy/ZiWjhYcpqbRM5EYpSkz4CLBBDzJIH0uqsiAbTQbkAUBcgRlpeGoeMEU3SaaIaVZYuYQ5OAaZsBeXry%2buQ7bMcYo/tUc%2bY7qC7QEEFjU5isKMTrlUsxsuE%2b%2bvUgQASv0YJghfAwrY0bnNbOQXIbJ9t/pY/Sufq7Tsjo4MDhBMqJschmfrPEpFrtRdXXIsBXgZhWd62bgB4SJRP4ck8GLllgg0k%2bNswnSGbRs98U1Z0iR8zcqZgd5IDfH8zRcZjSHLcrCvBa5TKM0EOApAWa3KBRwKhmPnt%2bvQDz6wWDf3%2bu0k%2bAzXEkAmRFZ5WU/78aqhBuaYUWDfjeBFzVQ0A3EerYri5u%2bgKv3cn21cmT2iR0EiWNBqgJ0KcBai2QNEEdFkMUwrlT396Vl517CEEKHrZf1kOC/Qmm/gZUTcW18vOCtOK%2btvS7CRAYAal119W2Ly5OIqKnL9A%2bJ6mSs6Nj97nuM73qAq2xiZy%2bTECrky%2bQnCLGtHDjYtXY5NXf6zGDlRdUMOkoyqcfY1nfem31V2uCLgFS%2bAlpVOHnVevwQXkW3hQXJ1WAfRVA3x7IwSv7s/CbA9msX/koC7//OKdXdNB5V/QxNyuLsbM8A5uPblc7QIWglwCtBImlyNEtfK4XC4mCQdV3eghYcpqH/V93Quv1%2b89ENAuf%2b2vUX1f62mommUFG3VW8cGQ9/kSRQDQByRx6kkCSpkSndm0M1q5R91NrF%2bPlvRm69q79rtaYNEfb0S2YUH%2bbRSHSRMk590ECR1gimoWjsAwBXmam3puArDO8LOcMB6UXuH%2bR59QKe70I0NYAyRRoMpLKvYpcJqW%2bCJDAkeQ/25mKn%2b1Kw%2b/6kL6mk5OsLMb7FdlYXX0AFyhQo/paSVDvrnbezA%2bENQnXVl9UvlBwVgUJp/XUBnGtvJxy5sTT3Azd8Nfn4FpmwOG8JsQDx4/ig/JM5hSZI9ST8Uk%2bgJwjeX2W9BwpYdf07x%2boJU9j0tibTzaiV5N6Tg34PggQ70spsjKzXWWYdJpjqXEvAsKbeIPwJh4imvgF2oWPXvBaJEgRYb4Csaz2oo4G9AyLUpV47VA%2bXv00T6fTNYr3vRyhVqdkK%2bvUd7oZYF/SF81UKzvEqGZueoQaI/ubBZ0W2cz3o%2bopuplPFDVA%2bVgCtCRADmlRw0P8qmoV3q3I11k4i/PlhSypoeTGbZo5zrG2QM8Z3Z1%2bk0mQRmgcoJb6E7FnjmxgpvY4yffMCUiYYoXo824LD4tbeO2/01C3EAXfL0TB0zFD1ADmPR83QYDohUki3grEHSdqRTMo6Q6JIgnkAEnaXjYjcYxpf7S2MkJrqyE4yuQtDHObqJMma4dVUv/75Vm4tqadzfEk0tf2AwEKZNtmwY28f3AjD8GNegjwaxD6%2bTUIdEzTqv4eqwE6lSHTgk78omoN/qcij0lOO0FiWlC9FFs2xuMCeysGnnqIywS8KEpfUyxpgf%2b5IgfbjmzWlb407%2bPWp1Z/Vsb7NqCfbwOCbwP2JiC4ke8nspMh2vYTaUBPX0AeOv/UV3inIo/lBBoSxOyQUl4igb4X1KyJZnW/VPXRPU0mKar%2bnYoCvFFRgsl1NzS2/0jP3zsUMg1Ql868P22UBurTgMhmvl%2bkegcl6al8QK%2bwqHaI62ra8OfyHJa2qqOCbtlLpfEvx5axLl3rdpjk9UuYL7ldkY8ltZfYmNrgn0T6PX1AbCu3sE8fEN7EG5CHjGzm/Z84CujRAskf0IJX15xhNTypsFQq6xRA5QUMeO%2baoIjF/B8qS7Go9ste4J9c%2bt1RgAiIbuZmkpAjm/VEgbhW3iC%2blacy2P6J8oAnJCG17hq2HtmKdyoLdDZM%2btouZ/VBZSHWHd2F8fW3u8FTgfMUqq/jBMU9jawOlVlym7os7kVAWjsvo5q54Cw3MEghdHbv/fXOBJ%2bGBMoS5zchflqxD299nIo/VqhJII8vFUNSIXSDcv0DqbjjSBVLdvy0JP%2brwCu6M8HQJuFm8Vnli5ntKhJ2L/yQ2s7Dli%2bUcPjbrucjmoUrj6sF%2bvQFUnGiVSx5NyNuOHQYL2%2bJwnM70/HLven49UeZ%2bA0VRPuz2PkXe9Lx3M40/GJLDK6orGfv0Ls6av9Utq92gFItENUi1CMeBsSf9O8QF55VgfFhlFlVUTUo7OjeCnv0pBqnpC481KGKfTbj0b%2bew5AGJS5oQtxbXYU/7kvEC7vS8fyHyXh2exLb/GB9exK7dnFXOt74KBk3Hm9g79C79OGDxpLGFYE9lgw91eAydTWIBru/0lMNetehdjq8UNcR9tYCDVBpMSJo9rsZMagVMbQD0a8V0bEJcdfJGlRWZLCQRh8%2baH%2bQ9gupX/0kj30EpWjRWZGF62ra0bEZ0bcFMaRDPVZgE%2brOoT1/3%2bpPBPDk0%2bJbObuE06zWMdijj4B5p5CAy6KaOIhpVr0WpBDu9FUR9pQGWxRJrB0xpAXR/8Q99Nr7Bdq9V4s5%2b47jnlMN2HJki6ZOkD5/qf2A1mezyiKWQNUd3Ym7autx6cET6LiuHr0%2buoz%2bNfcxpBUxpE1MviQieqxH0kpR/SX7/2b7pYcvrFR/I4ANl/TsCK2/pGTfAwd8gjL6nBTZzH%2bkZQYaLdABT4sgO29HDDz1EF03NOPEhI1o6p2FQzyW4F8nB2FZZiziiUy8dSi3e1enryggZo13DuUgHs/AD5cm4N%2bnBqOReyKa%2beTipJRt6L61A4MaVGoi2Fp4PSSI0hd3hqNa%2bBVedQietWhQcv4Ru8LP7kUqhgyim2nriHPQ3RZjW0wauyPw9HmKvhs4rzuFIwKKcIBTLPZ3isOBbklo6JGC/5j1Lk72icer5epvBDcOq2O8OuRph7/u%2bH%2bD8oLKYrxbvRRdQpbg63YxaOiRjANdk7C/YywOnB2HlqGl6LaplWlbEH0gaehFgvauMKa2cSPp20ByGydffqGPTVFqzifpj43oAQQIQQhtEhq7P4kx8Cwv8G/gmQR8yq/jmOg1%2bLbjuzjAJREHe6aioWcqDvZIUXe3RHx1ZgQGLU5iKt55jNSftswLGVA6SucMeEUhPqguwl%2bqizExJQVfmxmBg10TNOOxsT1T8W3nBEb2xMSN6HfsDgaf1iFB/C4gfSLj97qdQphTh/KYJhUUnXsEAR9eVsHOy0q2Obq4hYfYVt5VowWiGUjg5%2b68gEO90pnEB3umdYN2T8ZB7snsSL8HucThqzYRaOsXh4fW57APG13Hi1F1opgRQp3OlSfUvuHY5lz0CFUTN9A5VjMuG9NDPSaRQJ00YphvHs77%2bBu2Jv8GTvRX6uyPpB/fylm928Kx7x15j/woIrawJgFoa3zMUZSNPYr0pzHl4qaoSgQveG4/g4ZuiTjAdQkaEngJtGah6uMgacGuCfi6bRS%2baReJM3zjmHTXLs3AXauzcfd72bh%2bWSampqWivX88/tM%2bCl%2bbGYmDXOLV42iNqSFVPBrOScO3nRPReG4aeu3/CoPb6O8FeM23wchmfpNLDYJLDcov/PSASIDHttQ2FRScUdEncTn7PtimGhqsEJQEPvg08t4HvsYhnskC2TlJQbM4ra5DgrRYsmOXeHzTPgb/b0YkvmwTiW/aESlR%2bMrMSHbtDbtoHOAch4YeSeJYusQO0jMPmQWZn%2bn8LMG38kfySxytNbRJ%2bKnwjPK17A7aA%2bRkH36lguy2J/yboVCFAGMqkX1JWVDHQ6RCFU2xPaD2gWpEQJHwtnOCYOiZKugD31Nq2iSoiUhBI49kNHRfgoNcE1gnbTLyUDtObXB9jdGLhDlpApmiVeRqKnq4oCbE%2bBbVHCp8FjXxBvRHU9FPIn2pFZ5VAhQilJxTwYjtP8giLiFEt%2bNu67wD%2bC%2bHmC5SvUHuycJgjxTqehemvfBB7o8Gof8dtc3rk3yPToIQaE39HWKUDiuOYfx5XBX0BYLTkYfyX375GTxqBKj45gE8Vcs9y0FGOwch%2b87JytrvQs0d/Iu5T86ZgWoQSnGxT0xCT3CP6o%2bTek/w4nkXmeVI/4IjtH76/4W4A2dlmy51Af2hx69qEc08BFddh2lZe%2bXjIlfCqJDSVwd5pJ4XF9elTcKTSFeff%2bgJ%2binG0MxJa6HzkQvz2rN3nHwxeOkumLeqQh5/7CpQhfurW8bpLpi//wsYl7gFrKLXGZh4ZUL/OZmvGM1NPy%2bqZ5fWQh6rDb9RFwZpzTnIPVk50C0ZLRbmtWw42vaKV/oH4Jix3cA6azf47/sM/us2P28bvO4QB285J4LFwjyDUQFFsLB418vD5mefEtnnBnukcL9GG34V%2bO6xOUn9LRbmHdzVdvX5BfnbYUxwsYGFby4M9kyD4OUH4Ddpb3tmwFuzE8B8fhZY%2buUbeKRtIBuTWSzMW23kmYrkF0gSPbXhtyBCz3g8zSWFwNGBRVm0xvDVB2Fa1HL5UO8sGBtUCBEr98Nv2kb4F8GMiGUwLbwUZkSvkK%2bqOgNv2MXA9KgVnqbzMr%2bnBZEqDvZIUdEitczhqcnQUm%2bm7uIYNKaK5qD7pt5ZF2bGvjd9oNsS5vBmxq2Rj1iYD684xEHC%2bsPwu7Qxi5aDTfQKsI9fA25pG2R/nRomt/QvgPDVn/yfpV9%2byVCvjE7SBvLGg9yTiQjqEgDJY2s7r54OsKc/YaDJzCTgQ70ybo8KKEze137tufGhy%2bCfs2INwld9DB6Zm0kYULi7Bn73Zr14NaRsqYbriDDSL98gYtXH8MLUcHBcsm7AcJ%2bc0mHeWXdIPbW8PFNb0VdotENLwhJoXrRtpfgOe5/MzMw766q5b27GO7nb3ujvmgQrytuZvdN6vkUEx6T18D9tvvkfwhCvDJgSuRxcUz6QvWQTbeCQsBbecoqH%2bPcPvTEuuDjIzDv7sPE76feM5qiLpQFqzWCmoonfapACXaM%2bwDUJDT1T0GhOKhq/k37LbH72nomLls3P3nHib/2dE8Azawv0d1li4JGxSWYfvw4MPdNgbvZW%2bMPa3IyNzAapT49eKX91ZrQBOaARPrkARm7gW7DjzRnRKz0mhJYUW/jmfmLildFh6p1118QrU6MBdG46L/PWsPnZZ0YHFBycEFKSYx2zctac3O0vwTAvGB1YBPEfVMA/ZsUa2MavlcmnxwDASHBL2/hfA/h/8pNnYNYv1x0AAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="512" data-src="/assets/static/avatar.cbda223.8e7ea103d657b5eaf0ae67bb8fef1355.png" data-srcset="/assets/static/avatar.cbda223.8e7ea103d657b5eaf0ae67bb8fef1355.png 512w" data-sizes="(max-width: 512px) 100vw, 512px" class="h-40 w-40 rounded-full g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/avatar.cbda223.8e7ea103d657b5eaf0ae67bb8fef1355.png" class="h-40 w-40 rounded-full g-image g-image--loaded" width="512" alt="avatar"></noscript></div><div class="text-true-gray-800 dark:text-true-gray-100 flex flex-grow flex-col justify-center"><h1 class="mb-2 text-3xl font-semibold">Michael Thomas</h1><p>
      I'm Michael Thomas, a web developer and systems engineer from Columbia,
      South Carolina. I love to build stuff, break stuff, and most
      importantly, learn from the experience. I like to blog about my
      experiences with Linux, self-hosting, and app development.
    </p></div></div><giscus-widget id="comments" repo="michaelhthomas/website" repoId="MDEwOlJlcG9zaXRvcnkzNzg5ODc5NDk=" category="Comments" categoryId="DIC_kwDOFpblrc4CQCwn" mapping="title" reactionsEnabled="1" emitMetadata="0" inputPosition="top" theme="" lang="en" loading="lazy"></giscus-widget></div><button role="button" aria-label="Scroll back to top" aria-hidden="true" class="bg-true-gray-200 text-true-gray-900 dark:bg-true-gray-800 dark:text-true-gray-100 hover:bg-true-gray-300 dark:hover:bg-true-gray-700 flex-center fixed bottom-6 right-6 hidden h-10 w-10 cursor-pointer rounded-full transition-all duration-300 lg:flex" style="opacity:0;pointer-events:none;"><span data-icon="ph:caret-up" class="iconify h-5 w-5"></span></button></div><div class="footer"><footer class="bg-true-gray-50 dark:bg-true-gray-800 border-primary-600 dark:border-true-gray-700 border-b-8"><div class="wrapper mx-auto mt-24 px-5"><div class="md:py-5"><div class="mt-6 flex flex-col items-center justify-between md:mt-0 md:flex-row"><div class="logo flex items-center"><div class="text-true-gray-700 dark:text-true-gray-200 mx-1 mt-5 text-center text-sm sm:mt-0 sm:text-left"><p class="font-bold">© 2024 Michael Thomas</p><p>
              Built with
              <span data-icon="noto:red-heart" data-inline="true" class="iconify"></span>
              and
              <a href="https://github.com/michaelhthomas/michaelhthomas.github.io?utm_source=michaelt.xyz" target="_blank" rel="noreferrer noopener" aria-label="michaelt.xyz" class="link text-true-gray-700 dark:text-true-gray-200 text-sm underline" data-v-ee938dfc>
                available on GitHub
              </a></p></div></div><div><div class="wrapper text-true-gray-700 dark:text-true-gray-300 my-3 flex flex-wrap text-center text-base"><a href="https://github.com/michaelhthomas" target="_blank" rel="noreferrer noopener" role="button" aria-label="github" class="link social-link hover:text-primary-500 mx-3 transition-colors" data-v-ee938dfc><span data-icon="mdi:github" class="iconify h-8 w-8"></span></a><a href="https://reddit.com/u/linuxoveruser" target="_blank" rel="noreferrer noopener" role="button" aria-label="reddit" class="link social-link hover:text-primary-500 mx-3 transition-colors" data-v-ee938dfc><span data-icon="mdi:reddit" class="iconify h-8 w-8"></span></a><a href="https://mstdn.social/@michaelhthomas" target="_blank" rel="me noreferrer noopener" role="button" aria-label="mastodon" class="link social-link hover:text-primary-500 mx-3 transition-colors" data-v-ee938dfc><span data-icon="mdi:mastodon" class="iconify h-8 w-8"></span></a><a href="/feed.xml" target="_blank" rel="" role="button" aria-label="rss" class="link social-link hover:text-primary-500 mx-3 transition-colors" data-v-ee938dfc><span data-icon="mdi:rss" class="iconify h-8 w-8"></span></a></div></div></div></div></div></footer></div></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"id":"896fdecc9214fb770ee45bdd4ac19264","title":"Using ZSH with Toolbox on Fedora Silverblue 33","path":"\u002Fblog\u002Fusing-zsh-with-toolbox-on-fedora-silverblue-33\u002F","date_published":"November 19, 2020","date_updated":"April 5, 2021","timeToRead":3,"tags":[{"id":"Fedora Silverblue","title":"Fedora Silverblue","path":"\u002Ftag\u002FFedora%20Silverblue\u002F"},{"id":"Linux","title":"Linux","path":"\u002Ftag\u002FLinux\u002F"}],"description":"Setup your own customized shell within Fedora Toolbox, all while maintaining convenience features from the default shell.","content":"\u003Cp\u003EFedora Silverblue is one of the most interesting Linux distros I have tried to date, and I ended up choosing to use it as my daily-driver for its stability, ease of updates, and cleanliness. However, one of my biggest must-haves was a proper, customized shell. \u003C\u002Fp\u003E\n\u003Cp\u003EMy personal choice of shell is ZSH with the \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fzimfw\u002Fzimfw\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EZim Framework\u003C\u002Fa\u003E, giving me a fast and simple shell experience without too much hassle. However, the basic installation steps for these differ a bit on Fedora Silverblue. \u003C\u002Fp\u003E\n\u003Ch2 id=\"installation\"\u003E\u003Ca href=\"#installation\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EInstallation\u003C\u002Fh2\u003E\n\u003Cp\u003EFirst, install \u003Ccode class=\"language-inline-text\"\u003Ezsh\u003C\u002Fcode\u003E as a layered package on the host system with rpm-ostree:\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"command-line-prompt\"\u003E\u003Cspan data-user=michael data-host=pc\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Esudo\u003C\u002Fspan\u003E rpm-ostree \u003Cspan class=\"token function\"\u003Einstall\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ezsh\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EAfter doing so, go ahead and reboot to enter the new ostree deployment, which will now contain zsh.\u003C\u002Fp\u003E\n\u003Cp\u003ENext, we’ll go ahead and install zsh in toolbox. Enter the toolbox with \u003Ccode class=\"language-inline-text\"\u003Etoolbox enter\u003C\u002Fcode\u003E and then install \u003Ccode class=\"language-inline-text\"\u003Ezsh\u003C\u002Fcode\u003E the old fashioned way:\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"command-line-prompt\"\u003E\u003Cspan data-user=michael data-host=pc\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Esudo\u003C\u002Fspan\u003E dnf \u003Cspan class=\"token function\"\u003Einstall\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ezsh\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ENow that we’ve got zsh installed everywhere, type \u003Ccode class=\"language-inline-text\"\u003Eexit\u003C\u002Fcode\u003E to get back to the host system. Since \u003Ccode class=\"language-inline-text\"\u003Echsh\u003C\u002Fcode\u003E is not included on Silverblue, we’ll use \u003Ccode class=\"language-inline-text\"\u003Eusermod\u003C\u002Fcode\u003E instead to switch to our shiny new shell:\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"command-line-prompt\"\u003E\u003Cspan data-user=michael data-host=pc\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Esudo\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eusermod\u003C\u002Fspan\u003E --shell \u003Cspan class=\"token variable\"\u003E\u003Cspan class=\"token variable\"\u003E$(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewhich\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ezsh\u003C\u002Fspan\u003E\u003Cspan class=\"token variable\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token environment constant\"\u003E$USER\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EAlternatively, Fedora offers \u003Ccode class=\"language-inline-text\"\u003Elchsh\u003C\u002Fcode\u003E which provides a similar interface to \u003Ccode class=\"language-inline-text\"\u003Echsh\u003C\u002Fcode\u003E on other Linux systems. \u003C\u002Fp\u003E\n\u003Cp\u003EStart a new shell and you should be greeted by the ZSH first time configuration, which will look something like this:\n\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 869 451' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-85dec52373f77aba650daaeba6fe6883'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-85dec52373f77aba650daaeba6fe6883)' width='869' height='451' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAhCAYAAABpwa0hAAAACXBIWXMAAAsSAAALEgHS3X78AAAL\u002FUlEQVRogZ3Z2W4kxxEFUH6BHwwbsKQRh%2bsMd7LZbO77vpNDzow0WgwB9o8YejH002mcyIpmiSApyg%2bFrso1MvLeG5HZAx%2b\u002F%2b74cnpyV2\u002FtP5fzquuwdHpdOb7lc3X4ox%2bcX5eD4tMx2FsvlzW25ur0rC91etOutrpeVja3y6fsvZf\u002F4pMx1uuXm7r4cnp5FH\u002F0PT07LyflFPEur6%2bXDx0\u002Fl5Pyy7BwclrPLq3JxfVN6a%2btlbGKqjLybKKPvJ198nmrTLnvu\u002FaVnYHpuocx3e2V1YyuMmVtcimd9e6cs9lZiwZOz86W3tlGWVtfivbuyVsYnp8vU3HwsrLO0HItYXF4p893af21zO9p1V1ZjwTMLi\u002FG7sLQcj36cOLuw2DfGGJ7XGD6W7ZvfdvmfcsDgyFj5dni0fDs8Vry\u002FGRqJ5%2bvBoSj\u002F5u1w1H096Hc02qjz%2b3Z0vHz9dji%2bh8ffRzt9o18zTnusr7592%2b%2bXbQdHxsPYWjba75\u002Ft1A2NvYtvj3l8V5sfnlpfx1D\u002FWicMrG\u002FtlI3t3TIxM1feTc2U7b2DsrW7Xw5OTsvW3n7ZPTgq2iiziysbm2X\u002F6CTaeddG2%2bn5Tlle3wgKdZdXy\u002FLaRtnc2Qsk7OwfBqK29w8CNeaCOu3mF5diB411dHZezi6vy97RcaBFf\u002FXsM5\u002F%2bMwudsrDUC5qh2\u002F7RcTm\u002Fuon22imDZM57FQJWNrbKxk51AENQwWKVrW5ulasPd2V9ezcWArqMYgiDLcricBv0p%2bYWwngG0I0NbRm%2bdxDjbu7ulaWVtZinashmUMROcZhFHZ9dhPbQFfOjHHssMLRmcanMdrrhdHpydHoefdStbW1H305vpY%2bCP3TA0Ni7aAxaeE3grj\u002FchTc93o\u002FPzkMkLYAYWowdvL67L5e3H8rkzFy8cwThY7hF2gULNAZRJHp26\u002Fb%2bY8zDUO\u002Fq1RFk5cajJ2nXYwoE3frUfaBA0uhPUWC0JRqMBjm7CRHT8wshcKDP6wldSOAssFfu3S942rHJ2Uon43pX58mxtDO28XzPNXWopm4qxpjvi%2bJz4viSYL5aBIfGqod18BChb96OhDc9RDC9q5y4teveDFWP65c7oP3Q%2bPv%2brqWYZtvc0b5gvh2Ocb8aHOqP3e7rSUHMhf3RAl\u002FtgI3t3eARj7%2bbmi7n1zchRnaEwIE1fgqH4Lp7cBi7ifviPtE6Oj0LPtINXCScNIBY4i5uJ63AFzqU1\u002FGOIg8hZtqsbm4HhVAFndiDdjQoQyznvmZxr3JAd2UtJnw\u002FPROQMhGuW6TJiJ58gIMInEWANadYhDKaQNAIHGGUL8gvLE6dmK8tPTAHymhjHvkFkdOOuJoTzQgaW2wGB4sYc4vdENrXouDVecCboZHYmaSA2P6mFfMT1qCa3zU3GIoncoUGslEWucNo5A45\u002Fj\u002FeDAbMh5uYH7DvtxtqcoYK98wdjCN30K9NiaSDBbA7KZP0ye%2bs65e1ynO9A3YN1AmSnQFBYUzosgNi%2b%2bLyauwUgSRUEEO81EGE9kTNThsrwuT6Zlle3wzk%2bJUf6Gce46GQ8fW1%2b1Q\u002F20IGVHg3XuYM2da8bLUIeQXUaQdV6tjBLoKalILYCN1bO9FnZr5TJqZnywAjcDBVF1TFVb%2bM\u002FO6HH4PDvg28e3gU3DeRvnjrCRUXNu\u002Fug79nV9fl9OIyIA3CGepAmDb4ZrTn9KKeC7StYfi%2b3Nx\u002FDF0xnsTH3HTi9PIqxkVRDrARaOhsYRx1NM04dOvg%2bCTGEcqdW9hu04PWM3NlIJW7TYEK2wq1TDvju3nPSKAs2yXERIpU7nZkSMWPfq26duyOaNJv%2bxB50Cth3Y8yTY7gaUeU%2bG1RpZ0jZP6Qax1BAR7MuA4BIAKmdsPvxMxsjdWL3fJ%2bejbEzW4HlHsrsRPKHWrsLvWn8vW9xn\u002F9fWtnV1CJ%2bBJTZZlnQKH3RCMDQR%2bd5ByRZzQpOwjLFzIfUVfX0qt2KmvyFLY%2bJ5gDlBosGGhgqSTogygngBfofPnp5zgmgy%2bD8FKIEgY55Ief\u002FxltQc6kIHf\u002F%2bbsoF0o51mLuPn0OitAJTsP1z19%2biPAJvupREk8Joc1BCdAXDs2d4ZmuWLAs8\u002Fsff4oyVKIdFs1u9G0ftx87YiChkJkgQYkdWVgMITEA7r2fmumLCwNMQigtmKjZGaFLndAZB5j9gygjThwXYrayGppAlMyDnxZP%2bKTGxmI8Z8o5zJ1iaWOS%2b20lz0WxP8set3kubA60MydwYgz4KLMIiwZ\u002FA1mM05byONzs7MXOEESLgSZPKnlEiObixO45HKUIquMQDtxpDlc1kqxFG86ABLtMgM2nn7n%2bn3j\u002FLAWGmrQ0PRln\u002FRCnWp7ik%2bnu47wgz\u002FiRFzRxnZB5J2ApXPoR0XpvkKmx8WoOoc\u002FDXFWspMY5X87dFue8R8gcIcvbsd986YAnEbDU5AF2nwbYObzCV9\u002FKQ7ga%2bGpPXKAEIkAT\u002FIkatMgoaYJyu6Wv77xNYpD4G3nA1nbstDkIasZ67cwHFeK4b3lCZIybW6FFxqwZ5XroApSpMx\u002FUsVX\u002FlwRwlAPwlOClIoul7vBQIflItNwHSktv7j5Gm4zZFze3IVTER27P8Bgj4vFZwFe7n3\u002F5JWBsUo7ldO0JGF4bH31Qg3M5iCASNotHvThXnJxGzGc32wi4XIWQXt58iDp0I8LyARTiqOeoMJCxMiHycL1UYR9lGX8bWOnoPeN90ki7zBvaaaurqkxL27E784%2bkRTtVzXFQpQ3zdj5R7R3rn1IfnyDT\u002FswZnhLDAV4EYV5SkXG73gd0Qln92nGnRSip8boTYuU902g7m3Xe9ZNH5NlfXcT75l0bdMi6zB3SFmXmVZ5Xdr5zfLYpr\u002FnGYvTzzcYM68aQuyh7EgG7B0cBxVys2O32B4SEOQOAFm1Qn2ksKKoXxuQIaICLGecZBbbo5FiL65kWi\u002FceCZEosra1E1BGu0rH%2bRBXuvHLv\u002F4d9DKfRYI1itUzwlK0l2OIPLTJ3NrXq7LzoBIb0ULilKLYd8D4ZN3VLIhL0h0HicUQJrHY4sVij7OAiQmR8nqeP43ExXdcfXd7ESIjFO7sxpi%2bGRhHbOM1ZXkosnN4nflF3C0cHYcdHEEw7ar2nMjBRM9Ychft4xK12%2btfyNYD1UZsXN5QvZgIvZuaCW8RJtdUDCMq\u002FcRm76B8%2bfGnGgncEK\u002FXm9zI6jrd%2bDWpk6P4fnF9G4iJW%2bT9g3qoWVmLPhZy0E%2bAamoNFQxWzqlQEchqTnEoWC9w6uENCiRMe4dH4SDoYzPb8oTo9\u002FEfL7\u002FTgNFHhSALrhYHdnYYVO0cKhgUBzlpa3cvkhXhSx%2bpMQRInPTVT5gSETiBUzlTdhmwPj6NhVuU22dOyhskp8mMGnHjdHEZcOcY39t7%2b2FzCl9bhN0YtXOBlxKigccVPJ7CIrbjXYpQ8Kw5rFg0R4i3ITTznYjhHEfkMk7X\u002FMA\u002FRGtBNfQxttAWucbkdJNjVFTFv0ZNbiIMh\u002FB1uhHbja%2bdvlL1py5O2xeoj7%2bfTISGWpmgggwzGcry352HS9CR8PLDLU5ebD4cR%2bMfo8Gh\u002FhH34RL04Wiat0sZhvNCNDLMVqjLsWrmmZlotStDX\u002F\u002FY3jouR5bYzKvfcxnhgEyLWvOmAioK9jgqfOQFCcGxK\u002FXyZC4U2zuoSzYC8t16hxinwpPT2EmGQQ%2bIgy4qgXxw9%2bi4L1ZsILrq0aWqftWhUPC5%2bXoeOD4JarHLeITSeISXQOvLHjbiPzrpD0WPI8BopsLCRZ7LdU415hSO4BDQ9M7o%2bWayUN\u002Ft3RAyC9CHABKtKnr1T9P4x2lzK9qgk0XGX3BxjbUeEcE4NIaQ6Q\u002Fy%2bUesRbMPZRycOIZNNCGv3%2bK6bnuniTDbQR19tacb%2bjxJgYm49Kj5skF5ixE5sUlMYHcIHy8SqNuPnyLB8S6NFT1MkiFPKJLG2iXpMhGDAv8kQZR3Y%2ba11t%2b%2b%2bqb859dfy39\u002F%2b6385a9\u002F7x9p8wap\u002FQdqO\u002FNMqrT\u002FPepToHUb5YD1JAVGG7HI%2b4Cq6Mv9W53MCmV06ah6S1Szsfy3yJN\u002FmYeIErRu7yHLa\u002F7tMWb%2bo6TO\u002FOOT9W80cLZbUuLf\u002FeX9wj9AYxN\u002FfBR%2bSQT\u002FB5e5CHV%2bpXyeAAAAAElFTkSuQmCC' \u002F%3e%3c\u002Fsvg%3e\" width=\"869\" alt=\"Zsh first time config\" data-srcset=\"\u002Fassets\u002Fstatic\u002Fimage.82a2fbd.634d41da8b4ced823678122f9c298cb9.png 480w, \u002Fassets\u002Fstatic\u002Fimage.372248f.634d41da8b4ced823678122f9c298cb9.png 869w\" data-sizes=\"(max-width: 869px) 100vw, 869px\" data-src=\"\u002Fassets\u002Fstatic\u002Fimage.372248f.634d41da8b4ced823678122f9c298cb9.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fassets\u002Fstatic\u002Fimage.372248f.634d41da8b4ced823678122f9c298cb9.png\" width=\"869\" alt=\"Zsh first time config\"\u003E\u003C\u002Fnoscript\u003E\nIf you’ve made it here, congratulations! Zsh is now installed and working.\u003C\u002Fp\u003E\n\u003Ch2 id=\"customization\"\u003E\u003Ca href=\"#customization\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECustomization\u003C\u002Fh2\u003E\n\u003Cp\u003ESilverblue’s default bash shell contains some important tweaks which, for example, provide the purple indicator present when inside the toolbox. These tweaks are a must-have for me, so I’ll be implementing them in my prompt theme for zsh. First, though, I’ll install my zsh framework of choice, Zim: \u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"command-line-prompt\"\u003E\u003Cspan data-user=michael data-host=pc\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ecurl\u003C\u002Fspan\u003E -fsSL https:\u002F\u002Fraw.githubusercontent.com\u002Fzimfw\u002Finstall\u002Fmaster\u002Finstall.zsh \u003Cspan class=\"token operator\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ezsh\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EThese next steps may differ a bit depending on the framework you choose, but the principles are the same. Currently, there is no way of knowing whether or not the shell is running inside toolbox, so we’ll start by fixing that. \u003C\u002Fp\u003E\n\u003Cp\u003EThe default Silverblue bash config uses a function that looks something like this to return whether or not toolbox is active: \u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"shell\"\u003E\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E -f \u002Frun\u002F.containerenv \u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\\\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&amp;&amp;\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E -f \u002Frun\u002F.toolboxenv \u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ethen\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token assign-left variable\"\u003E\u003Cspan class=\"token environment constant\"\u003EPS1\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token variable\"\u003E\u003Cspan class=\"token variable\"\u003E$(\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin class-name\"\u003Eprintf\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"\\[\u003Cspan class=\"token entity\" title=\"\\033\"\u003E\\033\u003C\u002Fspan\u003E[35m\\]⬢\\[\u003Cspan class=\"token entity\" title=\"\\033\"\u003E\\033\u003C\u002Fspan\u003E[0m\\]%s\"\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"[\\u@\\h \\W]\u003Cspan class=\"token entity\" title=\"\\\\\"\u003E\\\\\u003C\u002Fspan\u003E$ \"\u003C\u002Fspan\u003E\u003Cspan class=\"token variable\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EIn other words, the presence of \u002Frun\u002F.containerenv and \u002Frun\u002F.toolboxenv is what indicates that the shell is running inside toolbox. We can use this in our zsh config to append the purple ⬢ symbol, albeit a bit more elegantly.\u003C\u002Fp\u003E\n\u003Cp\u003EI took my prompt theme of choice, gitster, and duplicated its folder in ~\u002F.zim\u002Fmodules (this process will be similar for oh-my-zsh and others). I then edited my new prompt theme and added a function to detect the toolbox:\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"shell\"\u003E\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token function-name function\"\u003E_prompt_toolbox\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E -f \u002Frun\u002F.containerenv \u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&amp;&amp;\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E -f \u002Frun\u002F.toolboxenv \u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ethen\u003C\u002Fspan\u003E\n    print -n \u003Cspan class=\"token string\"\u003E\"%F{magenta}⬢ \"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Efi\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EThis function uses the same detection logic as the bash version, and uses the much more elegant \u003Ccode class=\"language-inline-text\"\u003E%F{}\u003C\u002Fcode\u003E zsh color syntax to switch the color to magenta before outputting the ⬢ character. Next, when the prompt variable, PS1, is defined at the end of the theme file, I added a call to \u003Ccode class=\"language-inline-text\"\u003E_prompt_toolbox()\u003C\u002Fcode\u003E at the beginning, resulting in the proper output of the indicator if and only if toolbox is active. \u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"shell\"\u003E\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token assign-left variable\"\u003E\u003Cspan class=\"token environment constant\"\u003EPS1\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'$(_prompt_toolbox)%(?:%F{green}:%F{red})➜ $(_prompt_gitster_pwd)${(e)git_info[prompt]}%f '\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ENow, time to test it out! I saved my new custom theme and enabled it in \u003Ccode class=\"language-inline-text\"\u003E~\u002F.zimrc\u003C\u002Fcode\u003E. After running \u003Ccode class=\"language-inline-text\"\u003Ezim compile\u003C\u002Fcode\u003E to build my new theme, I restarted zsh and was greeted with the same prompt as before. This time, though, entering the toolbox presented that small, purple indicator; finally giving me the beauty of a custom shell combined with the helpful utility that Silverblue’s default configuration provides. \u003C\u002Fp\u003E\n","cover_image":{"type":"image","mimeType":"image\u002Fpng","src":"\u002Fassets\u002Fstatic\u002Fprompt.07cc2b7.73ba7a3035430c02dbb55962aa1a518c.png","size":{"width":860,"height":430},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["\u002Fassets\u002Fstatic\u002Fprompt.a67b0b2.73ba7a3035430c02dbb55962aa1a518c.png 480w","\u002Fassets\u002Fstatic\u002Fprompt.07cc2b7.73ba7a3035430c02dbb55962aa1a518c.png 860w"],"dataUri":"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 860 430' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e5279e4abb46ccb7e26991fee3c2d3be'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e5279e4abb46ccb7e26991fee3c2d3be)' width='860' height='430' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAAsSAAALEgHS3X78AAADqElEQVRogeWW3U4bRxTH5wlqinHsnZ3Z9a53ba8\u002FWqVAL4IRJnZJiG0IsBiiOHzkpsjYkaqQmyoXvUPiLi\u002FR9%2bFFeIV\u002FNbPe2FCcOK2ioyhIP83OmTnsf87OOcfMsix8zzBqAdQwagHUMGoB1DBqAdQwagHUMGoB1DBqAdQwagHUMGoB1DBqAdQwagFfCymlHm3bvjWfOQBywkE\u002Fy\u002FvXpu7\u002Fj4I\u002F5f%2b5PXdtam6a5kf7fT7scy%2b6NbenH0BFWgihsUf74ujH4zS\u002FyXXlf1vDv33laM\u002FkmpzQyoWEEBKOk0WhUIDjOLPfADnaKKQJLgyYkkd2U0CmDEgjiijnXItVoyKTycB1XY1hGNqWTqf1czxybn5cm9yjfNWz%2blq%2b74%2b\u002FGOeQRgZSfUX1zI3o8J4HKczxmmnCklL7qeBXix4yD1J42evh5uYGFxcXmJ%2bfRzabneUG2DCEgZ9yD\u002FFh\u002FW\u002FUgw1kzAewCx6cvRrsxiJsLtDutNFoPMb6el2Pu7s7ePHiEIeHB6jX69je3sLr16fY3dnB8vISVlYeIQz3sLn5FPv7oV5vt1o4Onql\u002FTqdtrYPh%2bfwPB8ik4ZT\u002Fw3udhfZWl3jNJ4iu\u002FoYucNj2L8sw23vIbuyBvfZc9ieD8PgeFjy8EdYQ3L%2bR\u002FT7fai\u002Fy8tLzM3N6ZswUwpwwVF2q\u002Fir9gGPCmvImOkoAOEqrI0l%2bLaLXu8lVldrGAz6%2bgCnpyfY2uqg1XqmD6Lm79\u002F\u002FieOjV1haXMSTJxsYnPd1UNThVcBOTo7x7uIt3rwZYjg4x8FBF93uPopBAJFKwe2EyB39Dvd5F7n9nj6w09zUgXDWGsgdHMPZaMFpbMISJgxToPlrGa3az\u002FghkcBwONABuLq6QiKRmC0AciIFUmZSByO6jgIyzWFxoa9qsVhEqVRCUCyiXCqhWq3qXK5Uysjn85pcLqdJJpOoVCpoNpvwfQ%2blUqCvo\u002FofSpTK03a7pd8TBIGeC3WtXTciX4BVCGAH5Wju52F5fjQWA1j5YpQSlgU3a8OUFlKpFMIwxPX1Nc7OzrCwsDBrCljjFjIqMpNFMC42Kggqp6MxqgNxbVA2xbgoRgVS5Xq8FlfoeI%2bqBbFNERc7zSjPpcnHNk1sj\u002FarOiAmip3SooKv6s0XdQHrbsv5n23ubk%2be1g0%2b1YlmeYe8p1XHX\u002F2LfwdY3zhTW\u002Fn3EgBrRhi1AGoYtQBqGLUAahi1AGoYtQBqGLUAahi1AGoYtQBqGLUAahi1AGr%2bATHnBDXKR7SBAAAAAElFTkSuQmCC' \u002F%3e%3c\u002Fsvg%3e"},"cover_image_caption":null}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.88f80b0e.js" defer></script><script src="/assets/js/page--src--templates--post-vue.2a4c0239.js" defer></script>
  </body>
</html>